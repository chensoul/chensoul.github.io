<!doctype html><html lang=zh itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.109.0"><meta charset=utf-8><title>Doris通过外部表同步数据 · ChenSoul</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="Doris 可以创建通过 ODBC 协议访问的外部表。创建完成后，可以通过 SELECT 语句直接查询外部表的数据，也可以通过 INSERT INTO SELECT 的方式导入外部表的数据。 目前支持的数据源包"><meta name=keywords content="devops,programming"><meta name=google-site-verification content="D8XBzUhT4irNUQLKut79HFni0v3Xow4FY-oxUcsUlVk"><link rel=canonical href=https://blog.chensoul.com/posts/doris-external-table-load/><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://blog.chensoul.com/css/den.css><meta property="og:title" content="Doris通过外部表同步数据"><meta property="og:description" content="Doris 可以创建通过 ODBC 协议访问的外部表。创建完成后，可以通过 SELECT 语句直接查询外部表的数据，也可以通过 INSERT INTO SELECT 的方式导入外部表的数据。 目前支持的数据源包"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.com/posts/doris-external-table-load/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-18T10:27:21+08:00"><meta property="article:modified_time" content="2022-08-18T10:27:21+08:00"><meta itemprop=name content="Doris通过外部表同步数据"><meta itemprop=description content="Doris 可以创建通过 ODBC 协议访问的外部表。创建完成后，可以通过 SELECT 语句直接查询外部表的数据，也可以通过 INSERT INTO SELECT 的方式导入外部表的数据。 目前支持的数据源包"><meta itemprop=datePublished content="2022-08-18T10:27:21+08:00"><meta itemprop=dateModified content="2022-08-18T10:27:21+08:00"><meta itemprop=wordCount content="1348"><meta itemprop=keywords content="doris,mysql,postgresql,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Doris通过外部表同步数据"><meta name=twitter:description content="Doris 可以创建通过 ODBC 协议访问的外部表。创建完成后，可以通过 SELECT 语句直接查询外部表的数据，也可以通过 INSERT INTO SELECT 的方式导入外部表的数据。 目前支持的数据源包"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://blog.chensoul.com/images/background.webp);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://blog.chensoul.com/><img class="mr20 header-logo-image" src=https://blog.chensoul.com/images/fly.png alt=logo>
ChenSoul</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/categories/idea/>思考</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/links/>友链</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/about/>关于</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Doris通过外部表同步数据</h1><p class=header-date>作者：
ChenShu /
2022-08-18
/ 分类：
<a href=https://blog.chensoul.com/categories/database/>database</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://blog.chensoul.com/tags/doris/>doris</a>,
<a href=https://blog.chensoul.com/tags/mysql/>mysql</a>,
<a href=https://blog.chensoul.com/tags/postgresql/>postgresql</a></p></div></div></div></div></div><main><div class="container content"><article><p>Doris 可以创建通过 ODBC 协议访问的外部表。创建完成后，可以通过 SELECT 语句直接查询外部表的数据，也可以通过 <code>INSERT INTO SELECT</code> 的方式导入外部表的数据。</p><p>目前支持的数据源包括：</p><ul><li>MySQL</li><li>Oracle</li><li>PostgreSQL</li><li>SQLServer</li><li>Hive(1.0版本支持)</li></ul><p>开始之前，<strong>特别说明</strong>，本文是在 centos7.8 操作系统和 doris 1.1 版本下进行测试。</p><h2 id=安装-odbc-驱动>安装 ODBC 驱动</h2><h3 id=安装-mysql-odbc>安装 mysql odbc</h3><p><a href=https://doris.apache.org/zh-CN/docs/faq/install-faq>官方文档运维常见问题</a>中有提到：Doris 升级到1.0 以后版本通过ODBC访问MySQL外表报错 Failed to set ciphers to use (2026)：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ERROR <span class=m>1105</span> <span class=o>(</span>HY000<span class=o>)</span>: <span class=nv>errCode</span> <span class=o>=</span> 2, <span class=nv>detailMessage</span> <span class=o>=</span> driver connect Error: HY000 <span class=o>[</span>MySQL<span class=o>][</span>ODBC 8.0<span class=o>(</span>w<span class=o>)</span> Driver<span class=o>]</span>SSL connection error: Failed to <span class=nb>set</span> ciphers to use <span class=o>(</span>2026<span class=o>)</span>
</span></span></code></pre></div><p>解决方式是使用<code>Connector/ODBC 8.0.28</code> 版本的 ODBC Connector， 并且在操作系统处选择 <code>Linux - Generic</code>, 这个版本的 ODBC Driver 使用 openssl 1.1 版本。或者使用低版本的 ODBC Connector，比如<a href=https://dev.mysql.com/downloads/connector/odbc/5.3.html>Connector/ODBC 5.3.14</a>。</p><p>可以通过如下方式验证 MySQL ODBC Driver 使用的 openssl 版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ldd /path/to/libmyodbc8w.so <span class=p>|</span>grep libssl.so
</span></span></code></pre></div><p>如果输出包含 <code>libssl.so.10</code> 则使用过程中可能出现问题， 如果包含<code>libssl.so.1.1</code> 则与doris 1.0 兼容。</p><p>在这里，参考 <a href=https://qq52o.me/2732.html>解决报错libssl.so.1.1: cannot open shared object file: No such file or directory</a>，直接将 openssl 升级到1.1：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>wget https://www.openssl.org/source/openssl-1.1.1q.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>tar -xvf openssl-1.1.1q.tar.gz 
</span></span><span class=line><span class=cl><span class=nb>cd</span> openssl-1.1.1q 
</span></span><span class=line><span class=cl>./config shared --openssldir<span class=o>=</span>/usr/local/openssl --prefix<span class=o>=</span>/usr/local/openssl 
</span></span><span class=line><span class=cl>make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mv /usr/bin/openssl /usr/bin/openssl.old 
</span></span><span class=line><span class=cl>mv /usr/lib/openssl /usr/lib/openssl.old 
</span></span><span class=line><span class=cl>ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl 
</span></span><span class=line><span class=cl>ln -s /usr/local/openssl/include/openssl /usr/include/openssl 
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;/usr/local/openssl/lib&#34;</span> &gt;&gt; /etc/ld.so.conf 
</span></span><span class=line><span class=cl>ldconfig -v
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>openssl version 
</span></span></code></pre></div><p>接下来，下载 mysql-connector-odbc-8.0.28 版本的 odbc 驱动，并安装：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>wget https://dev.mysql.com/get/Downloads/Connector-ODBC/8.0/mysql-connector-odbc-8.0.28-1.el7.x86_64.rpm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rpm -ivh mysql-connector-odbc-8.0.28-1.el7.x86_64.rpm
</span></span></code></pre></div><p>创建测试文件:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>[mysql]
</span></span></span><span class=line><span class=cl><span class=s2>Driver = MySQL ODBC 8.0 Unicode Driver
</span></span></span><span class=line><span class=cl><span class=s2>Description = MyODBC 8.0 Driver
</span></span></span><span class=line><span class=cl><span class=s2>SERVER = 127.0.0.1
</span></span></span><span class=line><span class=cl><span class=s2>PORT = 3306
</span></span></span><span class=line><span class=cl><span class=s2>USER = root
</span></span></span><span class=line><span class=cl><span class=s2>Password = 123456
</span></span></span><span class=line><span class=cl><span class=s2>Database = test
</span></span></span><span class=line><span class=cl><span class=s2>OPTION = 3
</span></span></span><span class=line><span class=cl><span class=s2>charset=UTF8
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span> &gt; /etc/odbc.ini
</span></span></code></pre></div><p>执行命令，看驱动是否安装成功：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>isql -v mysql
</span></span></code></pre></div><p>查看 doris 中 MySQL ODBC Driver 使用的 openssl 版本：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>cat /opt/doris/be/conf/odbcinst.ini
</span></span><span class=line><span class=cl>ldd /usr/lib64/libmyodbc8w.so<span class=p>|</span>grep libssl
</span></span></code></pre></div><blockquote><p>**注意：**我是将 doris 安装在 /opt/doris 目录。</p></blockquote><h3 id=安装-postgresql-odbc>安装 postgresql odbc</h3><p>安装驱动：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>yum install -y unixODBC.x86_64 postgresql-odbc.x86_64
</span></span></code></pre></div><p>查看odbc配置文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>odbcinst -j
</span></span></code></pre></div><p>创建测试文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>[postgresql]
</span></span></span><span class=line><span class=cl><span class=s2>Driver = PostgreSQL
</span></span></span><span class=line><span class=cl><span class=s2>Description = Test to gp
</span></span></span><span class=line><span class=cl><span class=s2>Servername = 127.0.0.1
</span></span></span><span class=line><span class=cl><span class=s2>Trace = Yes
</span></span></span><span class=line><span class=cl><span class=s2>TraceFile = /tmp/sql.log
</span></span></span><span class=line><span class=cl><span class=s2>Database = test
</span></span></span><span class=line><span class=cl><span class=s2>Username = pgadmin
</span></span></span><span class=line><span class=cl><span class=s2>Password = 123456
</span></span></span><span class=line><span class=cl><span class=s2>Port = 5432
</span></span></span><span class=line><span class=cl><span class=s2>ReadOnly = 0
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span> &gt; /etc/odbc.ini
</span></span></code></pre></div><p>测试：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>isql -v postgresql
</span></span></code></pre></div><h2 id=创建-odbc-resource>创建 ODBC Resource</h2><p>ODBC Resource 的目的是用于统一管理外部表的连接信息。</p><p>创建一个 mysql 的外部资源：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CREATE EXTERNAL RESOURCE <span class=sb>`</span>mysql_odbc_test<span class=sb>`</span>
</span></span><span class=line><span class=cl>PROPERTIES <span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;type&#34;</span> <span class=o>=</span> <span class=s2>&#34;odbc_catalog&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;host&#34;</span> <span class=o>=</span> <span class=s2>&#34;127.0.0.1&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;port&#34;</span> <span class=o>=</span> <span class=s2>&#34;3306&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user&#34;</span> <span class=o>=</span> <span class=s2>&#34;root&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;password&#34;</span> <span class=o>=</span> <span class=s2>&#34;123456&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;database&#34;</span> <span class=o>=</span> <span class=s2>&#34;test&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;odbc_type&#34;</span> <span class=o>=</span> <span class=s2>&#34;mysql&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;driver&#34;</span> <span class=o>=</span> <span class=s2>&#34;MySQL ODBC 8.0 Unicode Driver&#34;</span>
</span></span><span class=line><span class=cl><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><p>创建一个 postgresql 的外部资源：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CREATE EXTERNAL RESOURCE <span class=sb>`</span>postgresql_odbc_test<span class=sb>`</span>
</span></span><span class=line><span class=cl> PROPERTIES <span class=o>(</span>
</span></span><span class=line><span class=cl> <span class=s2>&#34;host&#34;</span> <span class=o>=</span> <span class=s2>&#34;127.0.0.1&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;port&#34;</span> <span class=o>=</span> <span class=s2>&#34;5432&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;user&#34;</span> <span class=o>=</span> <span class=s2>&#34;pgadmin&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;password&#34;</span> <span class=o>=</span> <span class=s2>&#34;123456&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;database&#34;</span> <span class=o>=</span> <span class=s2>&#34;test&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;driver&#34;</span> <span class=o>=</span> <span class=s2>&#34;PostgreSQL&#34;</span>,  
</span></span><span class=line><span class=cl> <span class=s2>&#34;odbc_type&#34;</span> <span class=o>=</span> <span class=s2>&#34;postgresql&#34;</span>,
</span></span><span class=line><span class=cl> <span class=s2>&#34;type&#34;</span> <span class=o>=</span> <span class=s2>&#34;odbc_catalog&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><h5 id=odbc-相关参数如下>ODBC 相关参数如下：</h5><ul><li><code>type</code>: 必填，且必须为<code>odbc_catalog</code>。作为resource的类型标识。</li><li><code>user</code>: 外部表的账号，必填。</li><li><code>password</code>: 外部表的密码，必填。</li><li><code>host</code>: 外部表的连接ip地址，必填。</li><li><code>port</code>: 外部表的连接端口，必填。</li><li><code>odbc_type</code>: 标示外部表的类型，当前doris支持<code>mysql</code>与<code>oracle</code>，未来可能支持更多的数据库。引用该resource的ODBC外表必填，旧的mysql外表选填。</li><li><code>driver</code>: 标示外部表使用的 driver 动态库，引用该resource的ODBC外表必填，旧的mysql外表选填。<strong>必须与 <code>be/conf/odbcinst.ini</code> 中 odbc 的名称保持一致。</strong></li></ul><p>资源管理主要有三个命令：</p><ul><li>CREATE RESOURCE</li><li>DROP RESOURCE</li><li>SHOW RESOURCES</li></ul><p>例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>drop</span><span class=w> </span><span class=n>resource</span><span class=w> </span><span class=n>postgresql_odbc_lps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>show</span><span class=w> </span><span class=n>RESOURCES</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=创建外部表>创建外部表</h2><p>doris 目前支持的外部表有 MYSQL、POSTGRESQL、BROKER、HIVE、ICEBERG 、HUDI 等。</p><p>创建 mysql 的外部表：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CREATE EXTERNAL TABLE <span class=sb>`</span>ext_sys_shop<span class=sb>`</span> <span class=o>(</span>
</span></span><span class=line><span class=cl>  <span class=sb>`</span>id<span class=sb>`</span> bigint NOT NULL COMMENT <span class=s2>&#34;&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=sb>`</span>name<span class=sb>`</span> varchar<span class=o>(</span>32<span class=o>)</span> NOT NULL COMMENT <span class=s2>&#34;&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=sb>`</span>code<span class=sb>`</span> varchar<span class=o>(</span>32<span class=o>)</span> NOT NULL COMMENT <span class=s2>&#34;&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=sb>`</span>tenant_id<span class=sb>`</span> varchar<span class=o>(</span>10<span class=o>)</span> NOT NULL COMMENT <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=o>)</span> <span class=nv>ENGINE</span><span class=o>=</span>ODBC
</span></span><span class=line><span class=cl>COMMENT <span class=s2>&#34;ODBC&#34;</span>
</span></span><span class=line><span class=cl>PROPERTIES <span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;odbc_catalog_resource&#34;</span> <span class=o>=</span> <span class=s2>&#34;mysql_odbc_test&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;database&#34;</span> <span class=o>=</span> <span class=s2>&#34;test&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;table&#34;</span> <span class=o>=</span> <span class=s2>&#34;sys_shop&#34;</span>
</span></span><span class=line><span class=cl><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=创建-doris-表>创建 Doris 表</h2><p>创建 doris 表：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=n>doris_sys_shop</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>bigint</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>code</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>tenant_id</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COMMENT</span><span class=w> </span><span class=s2>&#34;Doris Table&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>DISTRIBUTED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>HASH</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=n>BUCKETS</span><span class=w> </span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>PROPERTIES</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s2>&#34;replication_num&#34;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>从外部表导入数据到 doris 表：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>doris_sys_shop</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>code</span><span class=p>,</span><span class=n>tenant_id</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>ext_sys_shop</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>INSERT 命令是同步命令，返回成功，即表示导入成功。</p><h2 id=注意事项>注意事项</h2><ol><li>必须保证外部 ODBC 数据源与 Doris 集群是可以互通，包括BE节点和外部数据源的网络是互通的。</li><li>ODBC 外部表本质上是通过单一 ODBC 客户端访问数据源，因此并不合适一次性导入大量的数据，建议分批多次导入。</li></ol></article><h2>相关文章</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://blog.chensoul.com><img src=/images/author.webp alt=ChenShu></a></div><div class=author-content><p class=author-title>作者</p><p class=author-name>ChenShu</p><p class=author-desc>Java 开发工程师。喜欢探索新技术。 在 <a href=https://github.com/chensoul>GitHub</a> 关注我。在我的 <a href=https://t.me/chenshu_eth>Telegram 频道</a>了解更多。</p></div></div></div></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>网站地图</div><ul class=list-unstyled><li><a href=https://blog.chensoul.com/tags/>标签</a></li><li><a href=https://blog.chensoul.com/categories/>分类</a></li><li><a rel=alternate type=application/rss+xml href=https://blog.chensoul.com/index.xml></i>订阅</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>社交</div><ul class=list-unstyled><li><a href=https://t.me/chenshu_eth rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/chenshu_eth rel=noopener target=_blank>Twitter</a></li><li><a href=https://space.bilibili.com/699805065/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>友链</div><ul class=list-unstyled><li><a href=https://github.com/chensoul rel=noopener target=_blank>GitHub</a></li><li><a href=https://uptime.chensoul.com/status/services rel=noopener target=_blank>Services</a></li><li><a href=https://data.pseudoyu.com/share/8YKX7FUa/pseudoyu-blog rel=noopener target=_blank>Analytics</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/chensoul/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small>&copy;
chenshu
2020 -
2023</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>