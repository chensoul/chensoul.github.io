<!doctype html><html lang=en-US prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="原文地址：https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a
在上一篇文章中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。"><title>[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端 | ChenSoul</title><link rel=canonical href=https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/><link rel=preconnect href=https://fonts.font.im><link rel=preconnect href=https://fonts.loli.net crossorigin><link href="https://fonts.loli.net/css2?family=Roboto+Slab:wght@400;500;700&display=swap" rel=stylesheet><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chensoul.cc/images/favicon.webp"><meta name=twitter:title content="[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端"><meta name=twitter:description content="原文地址：https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a
在上一篇文章中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。"><meta name=twitter:creator content="@ichensoul"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="chensoul"><meta property="og:url" content="https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/"><meta property="og:site_name" content="ChenSoul"><meta property="og:title" content="[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端"><meta property="og:description" content="原文地址：https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a
在上一篇文章中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-05T00:00:00+00:00"><meta property="article:tag" content="Oauth2"><meta property="article:tag" content="Java"><meta property="og:image" content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=name content="[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端"><meta itemprop=description content="原文地址：https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a
在上一篇文章中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。"><meta itemprop=datePublished content="2024-06-05T00:00:00+00:00"><meta itemprop=dateModified content="2024-06-05T00:00:00+00:00"><meta itemprop=wordCount content="778"><meta itemprop=image content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=keywords content="Oauth2,Java"><link rel=stylesheet href=https://cdnjs.loli.net/ajax/libs/font-awesome/6.4.0/css/all.min.css media=all><link rel=stylesheet href=/main.min.css type=text/css media=all><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"TechArticle","name":"[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端","headline":"[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端","inLanguage":"en-US","url":"https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/","description":"\u003cp\u003e原文地址：\u003ca href=\"https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a\" target=\"_blank\"\u003ehttps://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ca href=\"/posts/2024/06/05/oauth2-with-spring-part-2-getting-started-with-authorization-server/\"\u003e上一篇文章\u003c/a\u003e中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。\u003c/p\u003e","wordCount":"778","keywords":["oauth2","java"],"datePublished":"2024-06-05T00:00:00Z","dateModified":"2024-06-05T00:00:00Z","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/"},"publisher":{"@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/"}},{"@context":"https://schema.org","@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/","sameAs":["https://x.com/ichensoul","https://github.com/chensoul","https://www.linkedin.com/in/","https://www.youtube.com/@chensoul","https://t.me/chensouls"]}]}</script><script defer src=https://umami.chensoul.cc/random-string.js data-website-id=4718b57b-c900-4a61-a7af-0fe1fb1d50ce></script></head><body class="home blog post-layout-one-column"><button onclick=topFunction() id=scrollTopBtn title="Go to top">
<i class="fa-solid fa-arrow-up"></i></button><div id=header-top class=header-bar-wrap></div><div id=page class=site><a class="skip-link screen-reader-text" href=#content>Skip to content</a><header id=masthead class="site-header clearfix" role=banner><div class="header-main container clearfix"><div id=logo class="site-branding clearfix"><h1 class=site-title><a href=/ title=ChenSoul rel=home>ChenSoul</a></h1><p class=site-description>Java, Spring Boot, Microservice, Cloud, Architecture and DevOps Tutorials</p></div><div class="header-widgets clearfix"><aside id=search-2 class="header-widget widget_search"><form role=search method=get class=search-form onsubmit="return searchSite(event)"><label><span class=screen-reader-text>Search for:</span>
<input type=search class=search-field placeholder="Enter search keyword" name=query id=query title="Enter search keyword">
</label><button type=submit class=search-submit title=Search> <span class=genericon-search></span>
<span class=screen-reader-text>Search</span></button></form></aside></div></div><div id=main-navigation-wrap class=primary-navigation-wrap><nav id=main-navigation class="primary-navigation navigation container clearfix" role=navigation><ul id=menu-home class=main-navigation-menu><li class="menu-item menu-item-type-custom menu-item-object-custom
current-menu-item current_page_item menu-item-home"><a href=/>Home</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/spring-boot/>Spring Boot</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/architecture/>Architecture</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/microservice/>Microservice</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/kubernetes/>Kubernetes</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category
menu-item-has-children"><a href=/tutorials/>Tutorials</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/spring-boot-tutorials/>Spring Boot Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/microservice-tutorials/>Microservice Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/kubernetes-tutorials/>Kubernetes Tutorials</a></li></ul></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=https://github.com/chensoul target=_blank>About Me</a></li></ul></nav></div></header><div id=content class="site-content container clearfix"><section id=primary class="content-archive content-area post-content-area"><main id=main class=site-main role=main><article class="post type-post"><div class=post-inner-content><header class=entry-header><h2 class=entry-title><a href=https://blog.chensoul.cc/posts/2024/06/05/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring/ rel=bookmark title="[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端">[译]OAuth2 with Spring 第3部分：使用Spring授权服务器授予authorization_code OIDC客户端</a></h2><div class=entry-meta><span class=meta-date><time class="entry-date published" datetime=2024-06-05T00:00:00>2024-06-05
</time></span><span class=meta-author><span class="author vcard">chensoul</span>
</span><span class="tagcloud post-tags"><i class="fa fa-tags"></i>&nbsp;
<a class="tag-cloud-link widget__link widget__link--taglist" href=/tags/oauth2/ title=oauth2>oauth2</a>
&nbsp;
<a class="tag-cloud-link widget__link widget__link--taglist" href=/tags/java/ title=java>java</a></span></div></header><div class=entry-content><p>原文地址：<a href=https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a target=_blank>https://mainul35.medium.com/oauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring-67769f9dd68a</a></p><p>在<a href=/posts/2024/06/05/oauth2-with-spring-part-2-getting-started-with-authorization-server/>上一篇文章</a>中，我们讨论了使用 client_credential 的 OAuth2 授权服务器配置。在本文中，我们将讨论使用 authorization_code 授予类型的授权服务器配置。此授权流程将有一个 OIDC 客户端，它将通过使用授权码进行请求来获取 JWT 令牌。</p><p>如今，社交登录非常流行，它已由 OAuth2 和 OIDC 规范标准化。我们今天的讨论主题是设置我们的社交登录客户端 (oidc-client) 应用程序，将其注册到 Spring Boot 授权服务器，使用授权服务器登录并从 OIDC 客户端应用程序访问安全资源。</p><p>今天的演示将包含 2 个应用程序：</p><ol><li>授权服务器（端口 8080）</li><li>社交登录客户端（端口 8081）</li></ol><p>由于这是一个复杂的主题，让我们首先查看 UI 中的应用程序身份验证和授权流程，然后再讨论配置。</p><p>要继续阅读本文，请从<a href=https://github.com/mainul35/authorization-server-demo/tree/authorization-server-demo/social-login-with-oidc target=_blank>此处</a>获取项目源代码。首先启动授权服务器应用程序，然后在您最喜欢的 IDE 上启动社交登录客户端应用程序。</p><p>我们的社交登录客户端有 2 个端点：</p><ul><li>“/” 将使我们能够访问公共数据</li><li>“/private-data” 将为我们提供 JWT 令牌</li></ul><p>在浏览器上，导航到“ http://127.0.0.1:8081/private-data ”。这将带我们进入客户端应用程序的登录页面。</p><p><img src=../../../static/images/oauth2-with-spring-part-3-01.webp alt=img></p><p>由于我们对社交登录感兴趣，因此不要在此登录页面中输入您的用户名和密码，而是单击<strong>oidc-client</strong>。它将带您进入授权服务器的登录页面。</p><p>在下面的屏幕中输入“ user”作为用户名，输入“ secret”作为密码，然后单击“登录”。</p><p><img src=../../../static/images/oauth2-with-spring-part-3-02.webp alt=img></p><p>这将带您进入同意页面。请注意同意页面的以下 URL：</p><p><a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid%20profile%20read%20write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http://127.0.0.1:8081/login/oauth2/code/oidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue</a></p><p>从上面的URL我们可以找到几条信息：</p><ul><li><a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>response_type=code</a></li><li><a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>client_id=oidc-client</a></li><li><a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>scope = openid</a>, <a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>profile</a>, <a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>read</a>, <a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>write</a></li><li><a href="http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=oidc-client&amp;scope=openid+profile+read+write&amp;state=PcF7UjHDmYvmhwpKfv9zVosy0ZBIA2pZe7HHPixZ76E%3D&amp;redirect_uri=http%3A%2F%2F127.0.0.1%3A8081%2Flogin%2Foauth2%2Fcode%2Foidc-client&amp;nonce=_KHIsN6mNur-AFQz5KNK0TnZi3VPmj567qbe8-4zPMo&amp;continue=" target=_blank>redirect_uri=http://127.0.0.1:8081/login/oauth2/code/oidc-client</a></li></ul><p><img src=../../../static/images/oauth2-with-spring-part-3-03.webp alt=img></p><p>现在，从上面的页面提供您想要允许客户端应用程序的同意。</p><p>如果最初请求的URL（/private-data）具有您刚刚提供的正确同意，它将向我们提供访问令牌和刷新令牌，否则它将显示403错误页面。</p><p><img src=../../../static/images/oauth2-with-spring-part-3-04.webp alt=img></p><p>现在让我们深入研究代码。</p><h2 id=授权服务器配置>授权服务器配置</h2><p>在这个应用程序中，所有的事情都在 application.yml 文件中完成。Java 方面没有什么内容，除了主类。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>spring</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>security</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>user</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Definition of the user details that we will use for login</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># in the authorization server</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>user</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>password</span>: <span style=color:#e6db74>&#34;{noop}secret&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>roles</span>: <span style=color:#ae81ff>USER</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Oauth2 client registration starts from here</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>oauth2</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>authorization-server</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>client</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># We have defined only one client: oidc-client</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># This client information was also mentioned</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># in the above URL: client_id=oidc-client</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>oidc-client</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>registration</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># The following client ID and client secret will be matched with the</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># provided client credentials from client application</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>client-id</span>: <span style=color:#ae81ff>oidc-client</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>client-secret</span>: <span style=color:#e6db74>&#34;{noop}secret2&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># The following authorization-grant-type will be matched with the</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># provided authorization-grant-type from the client application</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>authorization-grant-types</span>:
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;authorization_code&#34;</span>
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;refresh_token&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>client-authentication-methods</span>:
</span></span><span style=display:flex><span>                - <span style=color:#ae81ff>client_secret_basic</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># This following redirect URI will be used to redirect the resource owner to the</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># Client application after the resource owner (user) provides necessary consents.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>redirect-uris</span>:
</span></span><span style=display:flex><span>                - <span style=color:#ae81ff>http://127.0.0.1:8081/login/oauth2/code/oidc-client</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>post-logout-redirect-uris</span>:
</span></span><span style=display:flex><span>                - <span style=color:#ae81ff>http://127.0.0.1:8081/logout</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># The scopes are defined in the authorization server.</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e># These won&#39;t display in the consent page</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>scopes</span>:
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;openid&#34;</span>
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;profile&#34;</span>
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;read&#34;</span>
</span></span><span style=display:flex><span>                - <span style=color:#e6db74>&#34;write&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Marking this flag as true will display the consent page</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>require-authorization-consent</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Here we set the access token and refresh token validity duration</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># in seconds</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>token</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>access-token-time-to-live</span>: <span style=color:#ae81ff>3600s</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>refresh-token-time-to-live</span>: <span style=color:#ae81ff>7200s</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#        endpoint:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#          token-uri: &#34;/oauth2/token&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#        issuer-uri: http://127.0.0.1:8080/issuer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>logging</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>level</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>org</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>springframework</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>security</span>: <span style=color:#ae81ff>trace</span>
</span></span></code></pre></div><h2 id=社交登录客户端>社交登录客户端</h2><p>客户端应用程序有一些 java 代码以及 application.yml 配置。</p><p>application.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>server</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8081</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>logging</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>level</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>org</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>springframework</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>security</span>: <span style=color:#ae81ff>TRACE</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>spring</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>security</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>oauth2</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>client</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>registration</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Client registration starts here</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>oidc-client</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Our oidc-client needs a provider. The provider information has been registered</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># at the bottom of this configuration</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>provider</span>: <span style=color:#ae81ff>spring</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># The following client-id and client-secred will be sent to the authorization server</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># for client_credentials authentication to the authorization server. We don&#39;t need to</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># mention the client_credentials in the grant type here. Note that, here the client-secret</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># must not have {noop} or any other encoding type mentioned.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>client-id</span>: <span style=color:#ae81ff>oidc-client</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>client-secret</span>: <span style=color:#ae81ff>secret2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Our authorization grant type is authorization_code</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>authorization-grant-type</span>: <span style=color:#ae81ff>authorization_code</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># The following redirect URL is the redirect URL definition of our client Server application.</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># It is generally the current application host address. The authorization server&#39;s redirect URL</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># definition means that this URL will be triggered when auth server redirects data to here.</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>redirect-uri</span>: <span style=color:#e6db74>&#34;{baseUrl}/login/oauth2/code/{registrationId}&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Scopes that will be displayed for requesting in the consent page.</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Authorization server must have equal or more scopes than these in number</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>scope</span>:
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>openid</span>
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>profile</span>
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>client-authentication-method</span>: <span style=color:#ae81ff>client_secret_basic</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># This client name will display in the login screen as social login type</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>client-name</span>: <span style=color:#ae81ff>oidc-client</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># As mentioned above about provider, here we register the provider details</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># for any unknown provider with their issuer URI</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>provider</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>spring</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>issuer-uri</span>: <span style=color:#ae81ff>http://localhost:8080</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Since our application acts as both authorization client and resource server,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># here is the configuration for resource server</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>resource-server</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>jwt</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>issuer-uri</span>: <span style=color:#ae81ff>http://localhost:8080</span>
</span></span></code></pre></div><p><strong>Controller</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.mainul35.socialloginclient;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.http.ResponseEntity;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.GetMapping;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.RequestMapping;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.RestController;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppController</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> AppService appService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getPublicData</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>ok</span>(<span style=color:#e6db74>&#34;Public data&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/private-data&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getPrivateData</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>ok</span>(appService.<span style=color:#a6e22e>getJwtToken</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Service：</strong></p><p>由于我们的服务方法中有*@PreAuthorize(“hasAuthority(&lsquo;SCOPE_read&rsquo;)”)*，所以我们必须允许来自同意页面的“读取”权限来访问这些数据，否则我们将收到 403 错误页面。您可能对我们如何在此处获取刷新令牌感兴趣。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.mainul35.socialloginclient;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.access.prepost.PreAuthorize;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.core.Authentication;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.core.context.SecurityContextHolder;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.oauth2.client.OAuth2AuthorizedClient;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.oauth2.client.OAuth2AuthorizedClientService;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.oauth2.core.OAuth2AccessToken;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.oauth2.core.OAuth2RefreshToken;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.stereotype.Service;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppService</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> OAuth2AuthorizedClientService authorizedClientService;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PreAuthorize</span>(<span style=color:#e6db74>&#34;hasAuthority(&#39;SCOPE_profile&#39;)&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getJwtToken</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> authentication <span style=color:#f92672>=</span> SecurityContextHolder.<span style=color:#a6e22e>getContext</span>().<span style=color:#a6e22e>getAuthentication</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> accessToken <span style=color:#f92672>=</span> getAccessToken(authentication);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> refreshToken <span style=color:#f92672>=</span> getRefreshToken(authentication);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> String.<span style=color:#a6e22e>format</span>(<span style=color:#e6db74>&#34;Access Token = %s &lt;br&gt;&lt;br&gt;&lt;br&gt; Refresh Token = %s&#34;</span>,
</span></span><span style=display:flex><span>                accessToken.<span style=color:#a6e22e>getTokenValue</span>(), refreshToken.<span style=color:#a6e22e>getTokenValue</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> OAuth2AccessToken <span style=color:#a6e22e>getAccessToken</span> (Authentication authentication) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> authorizedClient <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getAuthorizedClient</span>(authentication);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (authorizedClient <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            OAuth2AccessToken accessToken <span style=color:#f92672>=</span> authorizedClient.<span style=color:#a6e22e>getAccessToken</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (accessToken <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> accessToken;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> OAuth2RefreshToken <span style=color:#a6e22e>getRefreshToken</span>(Authentication authentication) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> authorizedClient <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getAuthorizedClient</span>(authentication);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (authorizedClient <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            OAuth2RefreshToken refreshToken <span style=color:#f92672>=</span> authorizedClient.<span style=color:#a6e22e>getRefreshToken</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (refreshToken <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> refreshToken;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> OAuth2AuthorizedClient <span style=color:#a6e22e>getAuthorizedClient</span>(Authentication authentication) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (authentication <span style=color:#66d9ef>instanceof</span> OAuth2AuthenticationToken) {
</span></span><span style=display:flex><span>            OAuth2AuthenticationToken oauthToken <span style=color:#f92672>=</span> (OAuth2AuthenticationToken) authentication;
</span></span><span style=display:flex><span>            String clientRegistrationId <span style=color:#f92672>=</span> oauthToken.<span style=color:#a6e22e>getAuthorizedClientRegistrationId</span>();
</span></span><span style=display:flex><span>            String principalName <span style=color:#f92672>=</span> oauthToken.<span style=color:#a6e22e>getName</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> authorizedClientService
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>loadAuthorizedClient</span>(clientRegistrationId, principalName);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>SocialLoginClientApplication</strong>：</p><p><strong>我们必须用@EnableMethodSecurity</strong>注释我们的Main类以允许应用程序中的方法安全。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.mainul35.socialloginclient;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.SpringApplication;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@EnableMethodSecurity</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SocialLoginClientApplication</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>  SpringApplication.<span style=color:#a6e22e>run</span>(SocialLoginClientApplication.<span style=color:#a6e22e>class</span>, args);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>根据<a href=https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html#oauth2Client-refresh-token-grant target=_blank>Spring Security 文档</a>，对于“ authorization_code”授予，如果<code>OAuth2AuthorizedClient.getRefreshToken()</code>可用并且<code>OAuth2AuthorizedClient.getAccessToken()</code>已过期，则会自动刷新<code>RefreshTokenOAuth2AuthorizedClientProvider</code>。</p><p><img src=../../../static/images/oauth2-with-spring-part-3-05.webp alt=img></p><p>感谢您的耐心阅读。在<a href=/posts/2024/06/05/oauth2-with-spring-part-4-spring-authorization-client-social-login-demo-with-google/>下一篇文章</a>中，我们将尝试了解如何在客户端应用程序中使用 Google 作为授权服务器。</p><p>此示例的完整代码可在<a href=https://github.com/mainul35/authorization-server-demo/tree/authorization-server-demo/social-login-with-oidc target=_blank>此处</a>找到。</p></div><div><div style=font-weight:700>Share this post:</div><a class=social-link-item href="https://twitter.com/intent/tweet?text=%5b%e8%af%91%5dOAuth2%20with%20Spring%20%e7%ac%ac3%e9%83%a8%e5%88%86%ef%bc%9a%e4%bd%bf%e7%94%a8Spring%e6%8e%88%e6%9d%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%88%e4%ba%88authorization_code%20OIDC%e5%ae%a2%e6%88%b7%e7%ab%af https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f" target=_blank rel="noopener noreferrer" title="Click to share on Twitter"><i class="fa-brands fa-square-twitter fa-2xl" style=color:#55acee></i>
</a><a class=social-link-item href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f&title=%5b%e8%af%91%5dOAuth2%20with%20Spring%20%e7%ac%ac3%e9%83%a8%e5%88%86%ef%bc%9a%e4%bd%bf%e7%94%a8Spring%e6%8e%88%e6%9d%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%88%e4%ba%88authorization_code%20OIDC%e5%ae%a2%e6%88%b7%e7%ab%af" target=_blank rel="noopener noreferrer" title="Click to share on LinkedIn"><i class="fa-brands fa-linkedin fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://telegram.me/share/url?text=%5b%e8%af%91%5dOAuth2%20with%20Spring%20%e7%ac%ac3%e9%83%a8%e5%88%86%ef%bc%9a%e4%bd%bf%e7%94%a8Spring%e6%8e%88%e6%9d%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%88%e4%ba%88authorization_code%20OIDC%e5%ae%a2%e6%88%b7%e7%ab%af&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f" target=_blank rel="noopener noreferrer" title="Click to share on telegram"><i class="fa-brands fa-telegram fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://reddit.com/submit?url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f&title=%5b%e8%af%91%5dOAuth2%20with%20Spring%20%e7%ac%ac3%e9%83%a8%e5%88%86%ef%bc%9a%e4%bd%bf%e7%94%a8Spring%e6%8e%88%e6%9d%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%88%e4%ba%88authorization_code%20OIDC%e5%ae%a2%e6%88%b7%e7%ab%af" target=_blank rel="noopener noreferrer" title="Click to share on reddit"><i class="fa-brands fa-reddit fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f" target=_blank rel="noopener noreferrer" title="Click to share on facebook"><i class="fa-brands fa-facebook fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://api.whatsapp.com/send?text=%5b%e8%af%91%5dOAuth2%20with%20Spring%20%e7%ac%ac3%e9%83%a8%e5%88%86%ef%bc%9a%e4%bd%bf%e7%94%a8Spring%e6%8e%88%e6%9d%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%88%e4%ba%88authorization_code%20OIDC%e5%ae%a2%e6%88%b7%e7%ab%af%20-%20https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f06%2f05%2foauth2-with-spring-part-3-authorizing-oidc-client-with-via-authorization-code-grant-from-spring%2f" target=_blank rel="noopener noreferrer" title="Click to share on whatsapp"><i class="fa-brands fa-whatsapp fa-2xl" style=color:#007bb5></i></a></div></div></article><nav class="navigation post-navigation" role=navigation><h2 class=screen-reader-text>Post navigation</h2><div class=nav-links><div class=nav-previous><a href=/posts/2024/06/05/oauth2-with-spring-part-2-getting-started-with-authorization-server/ rel=next><span class=post-title>[译]OAuth2 with Spring 第2部分：授权服务器入门</span></a></div><div class=nav-next><a href=/posts/2024/06/05/oauth2-with-spring-part-4-spring-authorization-client-social-login-demo-with-google/ rel=prev><span class=post-title>[译]OAuth2 with Spring 第4部分：Spring授权客户端与Google授权服务器的社交登录演示</span></a></div></div></nav><h2>Related content</h2><ul><li><a href=/microservice-tutorials/>Microservice Tutorials</a></li><li><a href=/spring-boot-tutorials/>Spring Boot Tutorials</a></li><li><a href=/posts/2024/10/15/spring-security-jwt/>[译]Spring Security 和 JWT 入门</a></li><li><a href=/posts/2024/10/14/testing-spring-boot-applications-best-practices-and-frameworks/>[译]测试 Spring Boot 应用程序：最佳实践和框架</a></li><li><a href=/posts/2024/07/10/springdoc-with-spring-boot/>Spring Boot集成SpringDoc生成Api文档</a></li><li><a href=/posts/2024/06/06/spring-boot-docker-image/>Spring Boot项目创建Docker镜像并运行应用</a></li><li><a href=/posts/2024/06/05/oauth2-with-spring-part-1-knowing-the-basic-concepts/>[译]OAuth2 with Spring 第1部分：了解基本概念</a></li><li><a href=/posts/2024/06/05/oauth2-with-spring-part-2-getting-started-with-authorization-server/>[译]OAuth2 with Spring 第2部分：授权服务器入门</a></li><li><a href=/posts/2024/06/05/oauth2-with-spring-part-4-spring-authorization-client-social-login-demo-with-google/>[译]OAuth2 with Spring 第4部分：Spring授权客户端与Google授权服务器的社交登录演示</a></li><li><a href=/posts/2024/06/05/oauth2-with-spring-part-5-securing-your-spring-boot-application-with-pkce-for-enhanced-security/>[译]OAuth2 with Spring 第5部分：使用PKCE保护您的Spring Boot应用程序以增强安全性</a></li></ul></main></section></div><div id=footer class=footer-wrap><footer id=colophon class="site-footer container clearfix" role=contentinfo><div id=footer-text class=site-info><span class=credit-link>Made with 🩷
by <a href=/ target=_blank rel="noopener noreferrer">ChenSoul</a></span></div></footer></div></div><script type=text/javascript src=/main.min.js></script></body></html>