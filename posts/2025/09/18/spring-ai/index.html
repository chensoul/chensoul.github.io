<!doctype html><html class=no-js lang=zh-cn><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Spring AI 介绍 - Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Spring AI 介绍"><meta property="og:description" content="Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.cc/posts/2025/09/18/spring-ai/"><meta property="og:site_name" content="ChenSoul Blog"><meta property="og:image" content><meta itemprop=name content="Spring AI 介绍"><meta itemprop=description content="Spring AI 是 Spring 团队推出的开源项目，当前版本为 1.0.2。它是一个专门为 AI 工程设计的应用程序框架，旨在将 Spring 生态系统的设计原则（如可移植性和模块化设计）应用到 AI 领域，并推广使用 POJO 作为应用程序的构建块。
核心目标：解决 AI 集成的基本挑战 - 连接企业数据和 API 与 AI 模型。"><meta itemprop=datePublished content="2025-09-18T00:00:00+00:00"><meta itemprop=dateModified content="2025-09-18T00:00:00+00:00"><meta itemprop=wordCount content="756"><meta itemprop=keywords content="Spring-Ai"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Spring AI 介绍"><meta name=twitter:description content="Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps"><meta name=twitter:image content><link rel=preconnect href=//fonts.loli.net crossorigin><link rel=dns-prefetch href=//fonts.loli.net><link rel=stylesheet href="https://fonts.loli.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title="ChenSoul Blog" rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/logo.svg loading=lazy alt="Site logo" width=60 height=60></div><div class="logo__item logo__text"><div class=logo__title>ChenSoul Blog</div><div class=logo__tagline>Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>分类</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>标签</span></a></li><li class=menu__item><a class=menu__link href=/index.xml><span class=menu__text>订阅</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Spring AI 介绍</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2025-09-18>2025-09-18</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/ai/ rel=category>Ai</a></span></div><div class="meta__item-tags meta__item"><svg class="meta__icon icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><span class=meta__text><a class=meta__link href=/tags/spring-ai/ rel=tag>Spring-Ai</a></span></div></div></header><div class="content post__content clearfix"><p>Spring AI 是 Spring 团队推出的开源项目，当前版本为 1.0.2。它是一个专门为 AI 工程设计的应用程序框架，旨在将 Spring 生态系统的设计原则（如可移植性和模块化设计）应用到 AI 领域，并推广使用 POJO 作为应用程序的构建块。</p><p><strong>核心目标</strong>：解决 AI 集成的基本挑战 - <strong>连接企业数据和 API 与 AI 模型</strong>。</p><h2 id=核心特性>核心特性</h2><h3 id=1-统一的-ai-模型-api>1. 统一的 AI 模型 API</h3><ul><li><strong>跨提供商可移植性</strong>：提供统一的接口，支持多个 AI 提供商</li><li><strong>多种模型类型</strong>：<ul><li>Chat Completion（聊天补全）</li><li>Embedding（嵌入）</li><li>Text to Image（文本生成图像）</li><li>Audio Transcription（音频转录）</li><li>Text to Speech（文本转语音）</li><li>Moderation（内容审核）</li></ul></li><li><strong>同步和流式 API</strong>：同时支持同步和异步流式处理</li><li><strong>结构化输出</strong>：将 AI 模型输出映射到 POJO</li></ul><h3 id=2-向量存储-api>2. 向量存储 API</h3><ul><li><strong>多数据库支持</strong>：支持 14 种向量数据库<ul><li>Apache Cassandra</li><li>Azure Vector Search</li><li>Chroma</li><li>Milvus</li><li>MongoDB Atlas</li><li>Neo4j</li><li>Oracle</li><li>PostgreSQL/PGVector</li><li>PineCone</li><li>Qdrant</li><li>Redis</li><li>Weaviate</li></ul></li><li><strong>元数据过滤</strong>：提供类似 SQL 的元数据过滤 API</li><li><strong>检索增强生成（RAG）</strong>：为 RAG 模式提供完整支持</li></ul><h3 id=3-工具调用-api>3. 工具调用 API</h3><ul><li><strong>方法标注</strong>：使用 <code>@Tool</code> 注解标记可调用的方法</li><li><strong>函数式支持</strong>：支持 <code>java.util.Function</code> 对象</li><li><strong>客户端工具集成</strong>：允许 AI 模型调用客户端工具和函数</li><li><strong>实时信息访问</strong>：获取必要的实时信息</li></ul><h3 id=4-高级-api-特性>4. 高级 API 特性</h3><ul><li><strong>ChatClient API</strong>：类似 WebClient 和 RestClient 的流式 API</li><li><strong>Advisors API</strong>：封装常见的生成式 AI 模式，转换发送到语言模型的数据</li><li><strong>对话记忆</strong>：支持聊天对话记忆和上下文管理</li><li><strong>RAG 支持</strong>：完整的检索增强生成实现</li></ul><h3 id=5-spring-boot-集成>5. Spring Boot 集成</h3><ul><li><strong>自动配置</strong>：为 AI 模型和向量存储提供自动配置</li><li><strong>Starter 支持</strong>：简化依赖管理和配置</li><li><strong>配置属性</strong>：通过 <code>application.yml</code> 进行配置</li><li><strong>Spring Initializr</strong>：使用 <a href=https://start.spring.io target=_blank>start.spring.io</a> 选择模型或向量存储</li></ul><h3 id=6-数据工程与可观测性>6. 数据工程与可观测性</h3><ul><li><strong>ETL 框架</strong>：文档注入 ETL 框架，支持数据工程</li><li><strong>可观测性</strong>：提供 AI 相关操作的洞察和监控</li><li><strong>模型评估</strong>：评估生成内容的工具，防止幻觉响应</li></ul><h2 id=支持的-ai-提供商>支持的 AI 提供商</h2><p>Spring AI 支持众多主流 AI 提供商：</p><ul><li><strong>OpenAI</strong>：GPT 系列模型</li><li><strong>Microsoft</strong>：Azure OpenAI 服务</li><li><strong>Amazon</strong>：Bedrock 服务</li><li><strong>Google</strong>：Vertex AI</li><li><strong>Anthropic</strong>：Claude 系列</li><li><strong>Ollama</strong>：本地模型部署</li><li><strong>其他</strong>：Hugging Face、Cohere 等</li></ul><h2 id=快速开始>快速开始</h2><h3 id=1-maven-配置>1. Maven 配置</h3><h4 id=方式一使用-spring-initializr>方式一：使用 Spring Initializr</h4><p>访问 <a href=https://start.spring.io target=_blank>start.spring.io</a>，选择：</p><ul><li>Spring Boot 版本：3.2+</li><li>依赖：Spring AI OpenAI</li></ul><h4 id=方式二手动添加依赖>方式二：手动添加依赖</h4><p><strong>父 POM 配置</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;parent&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter-parent<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>3.2.0<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;relativePath/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/parent&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- Spring AI 版本，建议使用最新稳定版 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;spring-ai.version&gt;</span>1.0.2<span style=color:#f92672>&lt;/spring-ai.version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependencyManagement&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- Spring AI BOM，统一管理所有 Spring AI 相关依赖版本 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-bom<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>${spring-ai.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;type&gt;</span>pom<span style=color:#f92672>&lt;/type&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;scope&gt;</span>import<span style=color:#f92672>&lt;/scope&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><p><strong>常用 Spring AI 依赖</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!-- OpenAI 支持 - 提供与 OpenAI API 的集成 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-starter-model-openai<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- Ollama 支持 - 提供与 Ollama API 的集成 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-starter-model-ollama<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- Anthropic 支持 - 提供与 Anthropic API 的集成 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-starter-model-anthropic<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- PostgreSQL 向量存储支持 - 用于 RAG 应用 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  	<span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-starter-vector-store-pgvector<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- Redis 向量存储支持 - 轻量级向量存储方案 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-starter-vector-store-redis<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- PDF 文档读取器 - 用于文档处理 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-pdf-document-reader<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.ai<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-ai-tika-document-reader<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h3 id=2-配置文件详解>2. 配置文件详解</h3><p>application.yml 配置（推荐）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>spring</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ai</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenAI 配置</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>openai</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># API 密钥，建议通过环境变量设置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>api-key</span>: <span style=color:#ae81ff>${OPENAI_API_KEY:your-api-key-here}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 基础 URL，默认使用 OpenAI 官方 API</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>base-url</span>: <span style=color:#ae81ff>${OPENAI_BASE_URL:https://api.openai.com}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 聊天模型配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>chat</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># 使用的模型名称，如 gpt-4, gpt-3.5-turbo</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>model</span>: <span style=color:#ae81ff>gpt-4</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 温度参数，控制输出的随机性 (0.0-2.0)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>temperature</span>: <span style=color:#ae81ff>0.7</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 最大生成 token 数</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>max-tokens</span>: <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 是否流式输出</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>stream</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 停止词列表</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>stop</span>: []
</span></span><span style=display:flex><span>      <span style=color:#75715e># 嵌入模型配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>embedding</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># 嵌入模型名称</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>model</span>: <span style=color:#ae81ff>text-embedding-ada-002</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 嵌入维度</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>dimensions</span>: <span style=color:#ae81ff>1536</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 图像生成配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># 图像模型名称</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>model</span>: <span style=color:#ae81ff>dall-e-3</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 图像尺寸</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>size</span>: <span style=color:#ae81ff>1024x1024</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 图像质量</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>quality</span>: <span style=color:#ae81ff>standard</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 生成数量</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>n</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 向量存储配置</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>vectorstore</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># PostgreSQL 向量存储配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>pgvector</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 索引类型：HNSW（分层导航小世界图）或 IVFFlat</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>index-type</span>: <span style=color:#ae81ff>HNSW</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 距离计算方式：COSINE_DISTANCE, EUCLIDEAN_DISTANCE, NEGATIVE_INNER_PRODUCT</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>distance-type</span>: <span style=color:#ae81ff>COSINE_DISTANCE</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向量维度，必须与嵌入模型维度一致</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>dimensions</span>: <span style=color:#ae81ff>1536</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 是否使用现有表</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>use-existing-index</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 索引参数</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>index-options</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># HNSW 参数</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>m</span>: <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>ef_construction</span>: <span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Redis 向量存储配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis 连接配置</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>host</span>: <span style=color:#ae81ff>localhost</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>port</span>: <span style=color:#ae81ff>6379</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>password</span>: <span style=color:#ae81ff>${REDIS_PASSWORD:}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>database</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向量存储键前缀</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>key-prefix</span>: <span style=color:#e6db74>&#34;spring-ai:&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向量维度</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>dimensions</span>: <span style=color:#ae81ff>1536</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 距离计算方式</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>distance-type</span>: <span style=color:#ae81ff>COSINE_DISTANCE</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 文档处理配置</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>document</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># PDF 处理配置</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>pdf</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 是否提取元数据</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>extract-metadata</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 是否提取图像</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>extract-images</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 页面范围</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>page-range</span>: <span style=color:#e6db74>&#34;1-&#34;</span>
</span></span></code></pre></div><h3 id=3-环境变量配置>3. 环境变量配置</h3><p><strong>推荐的环境变量设置</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># OpenAI API 配置</span>
</span></span><span style=display:flex><span>export OPENAI_API_KEY<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;your-actual-api-key-here&#34;</span>
</span></span><span style=display:flex><span>export OPENAI_BASE_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://api.openai.com&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Redis 配置（如果使用 Redis 向量存储）</span>
</span></span><span style=display:flex><span>export REDIS_PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;your-redis-password&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 数据库配置（如果使用 PostgreSQL 向量存储）</span>
</span></span><span style=display:flex><span>export SPRING_DATASOURCE_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;jdbc:postgresql://localhost:5432/vectordb&#34;</span>
</span></span><span style=display:flex><span>export SPRING_DATASOURCE_USERNAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;postgres&#34;</span>
</span></span><span style=display:flex><span>export SPRING_DATASOURCE_PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;your-db-password&#34;</span>
</span></span></code></pre></div><h3 id=4-编写代码>4. 编写代码</h3><p><strong>基础聊天功能</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/api/ai&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChatController</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> ChatClient chatClient;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ChatController</span>(ChatClient.<span style=color:#a6e22e>Builder</span> builder) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>chatClient</span> <span style=color:#f92672>=</span> builder.<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/chat&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>chat</span>(<span style=color:#a6e22e>@RequestBody</span> ChatRequest request) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            String response <span style=color:#f92672>=</span> chatClient.<span style=color:#a6e22e>prompt</span>(request.<span style=color:#a6e22e>getMessage</span>()).<span style=color:#a6e22e>call</span>().<span style=color:#a6e22e>content</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>ok</span>(response);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>status</span>(500).<span style=color:#a6e22e>body</span>(<span style=color:#e6db74>&#34;AI 服务暂时不可用&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 流式聊天</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/chat/stream&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>StreamingResponseBody<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>chatStream</span>(<span style=color:#a6e22e>@RequestBody</span> ChatRequest request) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>ok</span>()
</span></span><span style=display:flex><span>            .<span style=color:#a6e22e>contentType</span>(MediaType.<span style=color:#a6e22e>TEXT_PLAIN</span>)
</span></span><span style=display:flex><span>            .<span style=color:#a6e22e>body</span>(outputStream <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                chatClient.<span style=color:#a6e22e>prompt</span>(request.<span style=color:#a6e22e>getMessage</span>())
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>content</span>()
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>forEach</span>(content <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                            outputStream.<span style=color:#a6e22e>write</span>(content.<span style=color:#a6e22e>getBytes</span>());
</span></span><span style=display:flex><span>                            outputStream.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>                        } <span style=color:#66d9ef>catch</span> (IOException e) {
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException(e);
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>                    });
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 请求 DTO</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChatRequest</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String message;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// getter 和 setter</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getMessage</span>() { <span style=color:#66d9ef>return</span> message; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMessage</span>(String message) { <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>=</span> message; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>命令行运行示例</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringAiDemoApplication</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        SpringApplication.<span style=color:#a6e22e>run</span>(SpringAiDemoApplication.<span style=color:#a6e22e>class</span>, args);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> CommandLineRunner <span style=color:#a6e22e>runner</span>(ChatClient.<span style=color:#a6e22e>Builder</span> builder) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> args <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>            ChatClient chatClient <span style=color:#f92672>=</span> builder.<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>            String response <span style=color:#f92672>=</span> chatClient.<span style=color:#a6e22e>prompt</span>(<span style=color:#e6db74>&#34;Tell me a joke&#34;</span>).<span style=color:#a6e22e>call</span>().<span style=color:#a6e22e>content</span>();
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;AI Response: &#34;</span> <span style=color:#f92672>+</span> response);
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=5-运行应用>5. 运行应用</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 使用 Maven 运行</span>
</span></span><span style=display:flex><span>./mvnw spring-boot:run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 或者先编译再运行</span>
</span></span><span style=display:flex><span>./mvnw clean package
</span></span><span style=display:flex><span>java -jar target/your-app.jar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用环境变量运行</span>
</span></span><span style=display:flex><span>OPENAI_API_KEY<span style=color:#f92672>=</span>your-key ./mvnw spring-boot:run
</span></span></code></pre></div><h2 id=典型应用场景>典型应用场景</h2><h3 id=1-智能客服系统>1. 智能客服系统</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChatController</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> ChatClient chatClient;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/chat&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>chat</span>(<span style=color:#a6e22e>@RequestBody</span> String message) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> chatClient.<span style=color:#a6e22e>prompt</span>(message).<span style=color:#a6e22e>call</span>().<span style=color:#a6e22e>content</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=2-文档问答系统rag>2. 文档问答系统（RAG）</h3><ul><li>使用嵌入模型对文档进行向量化</li><li>实现语义搜索和问答功能</li><li>支持多轮对话和上下文记忆</li></ul><h3 id=3-智能代码助手>3. 智能代码助手</h3><ul><li>结合代码嵌入进行语义搜索</li><li>提供代码补全和建议</li><li>支持多种编程语言</li></ul><h3 id=4-内容生成>4. 内容生成</h3><ul><li>自动摘要生成</li><li>文本翻译和润色</li><li>创意内容创作</li></ul><h2 id=技术优势>技术优势</h2><h3 id=1-spring-生态集成>1. Spring 生态集成</h3><ul><li>与 Spring Boot、Spring Security 等无缝集成</li><li>遵循 Spring 的设计理念和最佳实践</li><li>支持依赖注入和 AOP</li></ul><h3 id=2-配置简化>2. 配置简化</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>spring</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ai</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>openai</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>api-key</span>: <span style=color:#ae81ff>${OPENAI_API_KEY}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>chat</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>model</span>: <span style=color:#ae81ff>gpt-4</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>temperature</span>: <span style=color:#ae81ff>0.7</span>
</span></span></code></pre></div><h3 id=3-类型安全>3. 类型安全</h3><ul><li>强类型 API 设计</li><li>编译时错误检查</li><li>更好的 IDE 支持</li></ul><h3 id=4-可扩展性>4. 可扩展性</h3><ul><li>插件化架构</li><li>自定义模型支持</li><li>灵活的配置选项</li></ul><h2 id=总结>总结</h2><p>Spring AI 为 Java 开发者提供了一个强大、灵活且易于集成的 AI 解决方案。它让您能够在熟悉的 Spring 生态系统中快速构建现代化的 AI 驱动应用程序，特别适合实现"基于文档的问答"和"与文档对话"等常见用例。</p></div></article></main><footer class=post__footer><div class=post-related><h3>相关文章</h3><ul class=post-related-list><li class=post-related-item><a href=/posts/2025/07/15/ruoyi-ai/ target=_blank title="RuoYi AI 源码分析">RuoYi AI 源码分析</a></li></ul></div></footer><footer class=post__footer><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/spring-ai/ rel=tag>spring-ai</a></li></ul></div></footer></footer><nav class="pagination flex"><div class="pagination__item pagination__item--prev"><a class=pagination__link href=/posts/2025/08/24/my-development-setup-2025/ rel=prev><p class=pagination__title>«&#8201;上一篇: 我的 2025 年开发设置</p></a></div><div class="pagination__item pagination__item--next"><a class=pagination__link href=/posts/2025/09/19/spring-ai-chat-client-api/ rel=next><p class=pagination__title>&#8201;» 下一篇: Spring AI ChatClient API 介绍</p></a></div></nav><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="ChenSoul avatar" src=/avatar.jpg class=avatar height=60 width=60 loading=lazy></figure><div class=authorbox__header><span class=authorbox__name>关于 ChenSoul</span></div><div class=authorbox__description>一个来自中国武汉的开发者，主要撰写软件开发和开源方面的文章。浏览我的<a href=%28/posts%29>博客文章</a>，订阅我的 <a href=/index.xml>RSS</a> 源，或了解更多<a href=/about/>关于我</a>的信息。</div></div><p><h3>欢迎留言！</h3></p><div id=remark42></div><script>var remark_config={host:"https://comment.chensoul.cc",site_id:"remark",components:["embed"],url:"https://blog.chensoul.cc/posts/2025/09/18/spring-ai/",locale:"zh"};!function(e,t){for(s=0;s<e.length;s++){var s,n=t.createElement("script"),o=".js",i=t.head||t.body;"noModule"in n?(n.type="module",o=".mjs"):n.async=!0,n.defer=!0,n.src=remark_config.host+"/web/"+e[s]+o,i.appendChild(n)}}(remark_config.components||["embed"],document)</script></div><aside class="sidebar sidebar--right"><div class="post__toc toc"><div class=toc__title>目录</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#核心特性>核心特性</a><ul><li><a href=#1-统一的-ai-模型-api>1. 统一的 AI 模型 API</a></li><li><a href=#2-向量存储-api>2. 向量存储 API</a></li><li><a href=#3-工具调用-api>3. 工具调用 API</a></li><li><a href=#4-高级-api-特性>4. 高级 API 特性</a></li><li><a href=#5-spring-boot-集成>5. Spring Boot 集成</a></li><li><a href=#6-数据工程与可观测性>6. 数据工程与可观测性</a></li></ul></li><li><a href=#支持的-ai-提供商>支持的 AI 提供商</a></li><li><a href=#快速开始>快速开始</a><ul><li><a href=#1-maven-配置>1. Maven 配置</a></li><li><a href=#2-配置文件详解>2. 配置文件详解</a></li><li><a href=#3-环境变量配置>3. 环境变量配置</a></li><li><a href=#4-编写代码>4. 编写代码</a></li><li><a href=#5-运行应用>5. 运行应用</a></li></ul></li><li><a href=#典型应用场景>典型应用场景</a><ul><li><a href=#1-智能客服系统>1. 智能客服系统</a></li><li><a href=#2-文档问答系统rag>2. 文档问答系统（RAG）</a></li><li><a href=#3-智能代码助手>3. 智能代码助手</a></li><li><a href=#4-内容生成>4. 内容生成</a></li></ul></li><li><a href=#技术优势>技术优势</a><ul><li><a href=#1-spring-生态集成>1. Spring 生态集成</a></li><li><a href=#2-配置简化>2. 配置简化</a></li><li><a href=#3-类型安全>3. 类型安全</a></li><li><a href=#4-可扩展性>4. 可扩展性</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/>首页</a> | <a class=footer__link href=/categories/>分类</a> | <a class=footer__link href=/tags/>标签</a> | <a class=footer__link href=/index.xml>订阅</a> | <a class=footer__link href=/about/>关于</a></div><div class=footer__copyright>&copy; 2025 ChenSoul.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/chensoul/rose-hugo/ rel="nofollow noopener" target=_blank>Rose Hugo</a> 主题</span></div></div><style>.scroll-up a{display:block;height:3.125rem;width:3.125rem;text-align:center;line-height:2.7;border-radius:50px;font-size:1.125rem;color:#fff;opacity:1;transition:all .3s ease 0s;box-shadow:0 0 10px rgb(0 0 0/.2)}.scroll-up a{background:#ee591f}.scroll-up{position:fixed;display:none;bottom:50px;z-index:999}.scroll-up.right{right:60px}</style><div class="scroll-up custom right" style=display:block><a href=#top id=top-link accesskey=g><i class="fa fa-arrow-up"></i></a></div><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script defer src=https://umami.chensoul.cc/random-string.js data-website-id=1e07d36d-bec3-4ba6-9459-876b1ac3bbe7></script></footer></div><script>"use strict";(function(t){var i=t.querySelector(".menu__btn"),o=t.querySelector(".menu__list");function a(){o.classList.toggle("menu__list--active"),o.classList.toggle("menu__list--transition"),this.classList.toggle("menu__btn--active"),this.setAttribute("aria-expanded",this.getAttribute("aria-expanded")==="true"?"false":"true")}function r(){this.classList.remove("menu__list--transition")}i&&o&&(i.addEventListener("click",a,!1),o.addEventListener("transitionend",r,!1))})(document,window)</script></body></html>