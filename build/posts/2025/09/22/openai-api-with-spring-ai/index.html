<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenAI API 接口与 Spring AI 对应关系 - Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="OpenAI API 接口与 Spring AI 对应关系">
	<meta property="og:description" content="Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps">
	<meta property="og:type" content="article">
	<meta property="og:url" content="https://blog.chensoul.cc/posts/2025/09/22/openai-api-with-spring-ai/">
	<meta property="og:site_name" content="ChenSoul Blog">
	<meta property="og:image" content="">
	
  <meta itemprop="name" content="OpenAI API 接口与 Spring AI 对应关系">
  <meta itemprop="description" content="OpenAI API 提供了一套强大的接口，允许开发者将其先进的人工智能模型集成到各种应用中。它支持文本生成、翻译、总结、问答、对话、代码生成、图像生成、音频处理等多种任务。
Spring AI 通过统一的 API 对 OpenAI 的各种接口进行了封装，使得开发者可以在 Spring 生态系统中轻松使用 OpenAI 的所有功能。Spring AI 不仅支持 OpenAI，还支持其他遵循 OpenAI 接口规范的模型提供商。">
  <meta itemprop="datePublished" content="2025-09-22T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-09-22T00:00:00+00:00">
  <meta itemprop="wordCount" content="1497">
  <meta itemprop="keywords" content="Spring-Ai,Java,Tutorial">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="OpenAI API 接口与 Spring AI 对应关系">
	<meta name="twitter:description" content="Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps">
	<meta name="twitter:image" content="">

	<link rel="preconnect" href="//fonts.loli.net" crossorigin>
	<link rel="dns-prefetch" href="//fonts.loli.net">
	<link rel="stylesheet" href="https://fonts.loli.net/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="/css/style.css">

	<link rel="shortcut icon" href="/favicon.ico">
		
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="ChenSoul Blog" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/logo.svg" loading="lazy" alt="Site logo" width="60" height="60">
				</div><div class="logo__item logo__text">
					<div class="logo__title">ChenSoul Blog</div>
					<div class="logo__tagline">Java、Spring、Spring Boot、MicroServices、Architecture、Kubernetes、DevOps</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">菜单</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">首页</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/categories/">
				
				<span class="menu__text">分类</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/tags/">
				
				<span class="menu__text">标签</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/index.xml">
				
				<span class="menu__text">订阅</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">关于</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenAI API 接口与 Spring AI 对应关系</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 1 1 0 28 1 1 0 0 1 0-28m0 3a3 3 0 1 0 0 22 3 3 0 0 0 0-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class="meta__text" datetime="2025-09-22">2025-09-22</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/ai/" rel="category">Ai</a>
	</span>
</div><div class="meta__item-tags meta__item"><svg class="meta__icon icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 0 0 0-6 3 3 0 0 0 0 6"/></svg><span class="meta__text"><a class="meta__link" href="/tags/spring-ai/" rel="tag">Spring-Ai</a>, <a class="meta__link" href="/tags/java/" rel="tag">Java</a>, <a class="meta__link" href="/tags/tutorial/" rel="tag">Tutorial</a>
	</span>
</div>
</div>
		</header>
		
		<div class="content post__content clearfix">
			<p>OpenAI API 提供了一套强大的接口，允许开发者将其先进的人工智能模型集成到各种应用中。它支持文本生成、翻译、总结、问答、对话、代码生成、图像生成、音频处理等多种任务。</p>
<p>Spring AI 通过统一的 API 对 OpenAI 的各种接口进行了封装，使得开发者可以在 Spring 生态系统中轻松使用 OpenAI 的所有功能。Spring AI 不仅支持 OpenAI，还支持其他遵循 OpenAI 接口规范的模型提供商。</p>
<h2 id="第一部分openai-api-接口详解">第一部分：OpenAI API 接口详解</h2>
<h3 id="1-api-概述">1. API 概述</h3>
<p><strong>基础信息：</strong></p>
<ul>
<li>基础 URL：<code>https://api.openai.com/v1</code></li>
<li>认证方式：Bearer Token</li>
<li>请求格式：JSON</li>
<li>响应格式：JSON</li>
</ul>
<h3 id="2-认证与安全">2. 认证与安全</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 请求头格式</span>
</span></span><span style="display:flex;"><span>Authorization: Bearer YOUR_API_KEY
</span></span><span style="display:flex;"><span>Content-Type: application/json
</span></span></code></pre></div><p><strong>安全最佳实践：</strong></p>
<ul>
<li>将 API 密钥存储在环境变量中</li>
<li>使用密钥管理服务</li>
<li>定期轮换密钥</li>
<li>监控 API 使用情况</li>
</ul>
<h3 id="3-速率限制与计费">3. 速率限制与计费</h3>
<p><strong>速率限制：</strong></p>
<ul>
<li>基于账户类型和使用情况</li>
<li>按分钟和按天限制</li>
<li>可在账户设置中查看</li>
</ul>
<p><strong>计费模式：</strong></p>
<ul>
<li>按使用量计费</li>
<li>不同模型不同价格</li>
<li>按输入和输出标记数计算</li>
</ul>
<h2 id="第二部分openai-api-接口详解">第二部分：OpenAI API 接口详解</h2>
<h3 id="1-聊天补全chat-completions">1. 聊天补全（Chat Completions）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/chat/completions</code></p>
<p><strong>用途：</strong> 支持多轮对话，适用于构建聊天机器人等应用</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>模型名称（如 gpt-4, gpt-3.5-turbo）</td>
      </tr>
      <tr>
          <td><code>messages</code></td>
          <td>array</td>
          <td>是</td>
          <td>消息列表</td>
      </tr>
      <tr>
          <td><code>temperature</code></td>
          <td>number</td>
          <td>否</td>
          <td>温度参数（0-2），控制随机性</td>
      </tr>
      <tr>
          <td><code>max_tokens</code></td>
          <td>integer</td>
          <td>否</td>
          <td>最大生成标记数</td>
      </tr>
      <tr>
          <td><code>top_p</code></td>
          <td>number</td>
          <td>否</td>
          <td>核采样参数（0-1）</td>
      </tr>
      <tr>
          <td><code>n</code></td>
          <td>integer</td>
          <td>否</td>
          <td>生成数量（1-10）</td>
      </tr>
      <tr>
          <td><code>stream</code></td>
          <td>boolean</td>
          <td>否</td>
          <td>是否流式输出</td>
      </tr>
      <tr>
          <td><code>stop</code></td>
          <td>array</td>
          <td>否</td>
          <td>停止序列</td>
      </tr>
      <tr>
          <td><code>presence_penalty</code></td>
          <td>number</td>
          <td>否</td>
          <td>存在惩罚（-2到2）</td>
      </tr>
      <tr>
          <td><code>frequency_penalty</code></td>
          <td>number</td>
          <td>否</td>
          <td>频率惩罚（-2到2）</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td>string</td>
          <td>否</td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<p><strong>消息格式：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;system|user|assistant&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;消息内容&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/chat/completions <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;gpt-4&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;messages&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      {&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: &#34;你是一个乐于助人的助手。&#34;},
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;你好！&#34;}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;temperature&#34;: 0.7,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;max_tokens&#34;: 1000,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;top_p&#34;: 0.9,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;stream&#34;: false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>响应示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;chatcmpl-abc123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;object&#34;</span>: <span style="color:#e6db74">&#34;chat.completion&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#ae81ff">1677652288</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;gpt-4&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;choices&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;index&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;message&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;assistant&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;你好！有什么我可以帮助您的吗？&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;finish_reason&#34;</span>: <span style="color:#e6db74">&#34;stop&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;usage&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;prompt_tokens&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;completion_tokens&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;total_tokens&#34;</span>: <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-文本补全completions">2. 文本补全（Completions）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/completions</code></p>
<p><strong>用途：</strong> 生成或编辑文本，适用于内容创作、代码生成等</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>模型名称（如 text-davinci-003）</td>
      </tr>
      <tr>
          <td><code>prompt</code></td>
          <td>string/array</td>
          <td>是</td>
          <td>输入提示</td>
      </tr>
      <tr>
          <td><code>max_tokens</code></td>
          <td>integer</td>
          <td>否</td>
          <td>最大生成标记数</td>
      </tr>
      <tr>
          <td><code>temperature</code></td>
          <td>number</td>
          <td>否</td>
          <td>温度参数（0-2）</td>
      </tr>
      <tr>
          <td><code>top_p</code></td>
          <td>number</td>
          <td>否</td>
          <td>核采样参数（0-1）</td>
      </tr>
      <tr>
          <td><code>n</code></td>
          <td>integer</td>
          <td>否</td>
          <td>生成数量（1-10）</td>
      </tr>
      <tr>
          <td><code>stream</code></td>
          <td>boolean</td>
          <td>否</td>
          <td>是否流式输出</td>
      </tr>
      <tr>
          <td><code>stop</code></td>
          <td>array</td>
          <td>否</td>
          <td>停止序列</td>
      </tr>
      <tr>
          <td><code>presence_penalty</code></td>
          <td>number</td>
          <td>否</td>
          <td>存在惩罚（-2到2）</td>
      </tr>
      <tr>
          <td><code>frequency_penalty</code></td>
          <td>number</td>
          <td>否</td>
          <td>频率惩罚（-2到2）</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td>string</td>
          <td>否</td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/completions <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;text-davinci-003&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;prompt&#34;: &#34;请写一首关于春天的诗。&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;max_tokens&#34;: 100,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;temperature&#34;: 0.7,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;top_p&#34;: 0.9
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>响应示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;cmpl-abc123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;object&#34;</span>: <span style="color:#e6db74">&#34;text_completion&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#ae81ff">1677652288</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;text-davinci-003&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;choices&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;春天来了，万物复苏，花儿绽放，鸟儿歌唱。&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;index&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;finish_reason&#34;</span>: <span style="color:#e6db74">&#34;stop&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;usage&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;prompt_tokens&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;completion_tokens&#34;</span>: <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;total_tokens&#34;</span>: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-嵌入embeddings">3. 嵌入（Embeddings）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/embeddings</code></p>
<p><strong>用途：</strong> 将文本转换为向量表示，适用于语义搜索、推荐系统等</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>嵌入模型名称</td>
      </tr>
      <tr>
          <td><code>input</code></td>
          <td>string/array</td>
          <td>是</td>
          <td>输入文本</td>
      </tr>
      <tr>
          <td><code>encoding_format</code></td>
          <td>string</td>
          <td>否</td>
          <td>编码格式（float, base64）</td>
      </tr>
      <tr>
          <td><code>dimensions</code></td>
          <td>integer</td>
          <td>否</td>
          <td>嵌入维度</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td>string</td>
          <td>否</td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/embeddings <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;text-embedding-ada-002&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;input&#34;: &#34;机器学习的基本概念&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;encoding_format&#34;: &#34;float&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;dimensions&#34;: 1536
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>响应示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;object&#34;</span>: <span style="color:#e6db74">&#34;list&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;data&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;object&#34;</span>: <span style="color:#e6db74">&#34;embedding&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;embedding&#34;</span>: [<span style="color:#ae81ff">0.123</span>, <span style="color:#ae81ff">0.456</span>, <span style="color:#ae81ff">-0.789</span>, <span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;index&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;text-embedding-ada-002&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;usage&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;prompt_tokens&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;total_tokens&#34;</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4-图像生成images">4. 图像生成（Images）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/images/generations</code></p>
<p><strong>用途：</strong> 根据文本描述生成图像</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>图像模型名称（dall-e-2, dall-e-3）</td>
      </tr>
      <tr>
          <td><code>prompt</code></td>
          <td>string</td>
          <td>是</td>
          <td>图像描述</td>
      </tr>
      <tr>
          <td><code>n</code></td>
          <td>integer</td>
          <td>否</td>
          <td>生成数量（1-10）</td>
      </tr>
      <tr>
          <td><code>size</code></td>
          <td>string</td>
          <td>否</td>
          <td>图像尺寸</td>
      </tr>
      <tr>
          <td><code>quality</code></td>
          <td>string</td>
          <td>否</td>
          <td>图像质量（standard, hd）</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td>string</td>
          <td>否</td>
          <td>响应格式（url, b64_json）</td>
      </tr>
      <tr>
          <td><code>style</code></td>
          <td>string</td>
          <td>否</td>
          <td>图像风格（vivid, natural）</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td>string</td>
          <td>否</td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/images/generations <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;dall-e-3&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;prompt&#34;: &#34;一只可爱的猫在花园里玩耍&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;n&#34;: 1,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;size&#34;: &#34;1024x1024&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;quality&#34;: &#34;standard&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;response_format&#34;: &#34;url&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;style&#34;: &#34;vivid&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>响应示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#ae81ff">1677652288</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;data&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;https://oaidalleapiprodscus.blob.core.windows.net/private/...&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;revised_prompt&#34;</span>: <span style="color:#e6db74">&#34;一只可爱的猫在花园里玩耍，背景是美丽的花朵&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="5-音频转录audio-transcriptions">5. 音频转录（Audio Transcriptions）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/audio/transcriptions</code></p>
<p><strong>用途：</strong> 将音频转换为文本</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>file</code></td>
          <td>file</td>
          <td>是</td>
          <td>音频文件</td>
      </tr>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>转录模型（whisper-1）</td>
      </tr>
      <tr>
          <td><code>language</code></td>
          <td>string</td>
          <td>否</td>
          <td>语言代码</td>
      </tr>
      <tr>
          <td><code>prompt</code></td>
          <td>string</td>
          <td>否</td>
          <td>提示文本</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td>string</td>
          <td>否</td>
          <td>响应格式（json, text, srt, verbose_json, vtt）</td>
      </tr>
      <tr>
          <td><code>temperature</code></td>
          <td>number</td>
          <td>否</td>
          <td>温度参数（0-1）</td>
      </tr>
      <tr>
          <td><code>timestamp_granularities</code></td>
          <td>array</td>
          <td>否</td>
          <td>时间戳粒度</td>
      </tr>
  </tbody>
</table>
<p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/audio/transcriptions <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@audio.mp3&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F model<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;whisper-1&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F language<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F response_format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F temperature<span style="color:#f92672">=</span>0.0
</span></span></code></pre></div><p><strong>响应示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;想象一下你曾经有过的最疯狂的想法，并且你想知道它如何扩展到100倍、1000倍的规模。&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="6-文本转语音text-to-speech">6. 文本转语音（Text-to-Speech）</h3>
<p><strong>端点：</strong> <code>POST https://api.openai.com/v1/audio/speech</code></p>
<p><strong>用途：</strong> 将文本转换为语音</p>
<p><strong>请求参数：</strong></p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>类型</th>
          <th>必需</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td>string</td>
          <td>是</td>
          <td>TTS 模型（tts-1, tts-1-hd）</td>
      </tr>
      <tr>
          <td><code>input</code></td>
          <td>string</td>
          <td>是</td>
          <td>输入文本</td>
      </tr>
      <tr>
          <td><code>voice</code></td>
          <td>string</td>
          <td>是</td>
          <td>语音类型（alloy, echo, fable, onyx, nova, shimmer）</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td>string</td>
          <td>否</td>
          <td>响应格式（mp3, opus, aac, flac）</td>
      </tr>
      <tr>
          <td><code>speed</code></td>
          <td>number</td>
          <td>否</td>
          <td>语速（0.25-4.0）</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td>string</td>
          <td>否</td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<p><strong>请求示例：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://api.openai.com/v1/audio/speech <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;tts-1&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;input&#34;: &#34;你好，欢迎使用语音服务！&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;voice&#34;: &#34;alloy&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;response_format&#34;: &#34;mp3&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;speed&#34;: 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>响应：</strong> 返回音频文件的二进制数据</p>
<h3 id="7-流式处理">7. 流式处理</h3>
<p><strong>流式聊天补全：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST https://api.openai.com/v1/chat/completions <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer YOUR_API_KEY&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;gpt-4&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;messages&#34;: [{&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;讲一个故事&#34;}],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;stream&#34;: true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>流式响应格式：</strong></p>
<pre tabindex="0"><code>data: {&#34;id&#34;:&#34;chatcmpl-123&#34;,&#34;object&#34;:&#34;chat.completion.chunk&#34;,&#34;created&#34;:1677652288,&#34;model&#34;:&#34;gpt-4&#34;,&#34;choices&#34;:[{&#34;index&#34;:0,&#34;delta&#34;:{&#34;role&#34;:&#34;assistant&#34;,&#34;content&#34;:&#34;从前&#34;},&#34;finish_reason&#34;:null}]}

data: {&#34;id&#34;:&#34;chatcmpl-123&#34;,&#34;object&#34;:&#34;chat.completion.chunk&#34;,&#34;created&#34;:1677652288,&#34;model&#34;:&#34;gpt-4&#34;,&#34;choices&#34;:[{&#34;index&#34;:0,&#34;delta&#34;:{&#34;content&#34;:&#34;有&#34;},&#34;finish_reason&#34;:null}]}

data: [DONE]
</code></pre><h3 id="8-错误处理">8. 错误处理</h3>
<p><strong>错误响应格式：</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Invalid API key&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;invalid_request_error&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;invalid_api_key&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>常见错误码：</strong></p>
<ul>
<li><code>400</code>：请求错误</li>
<li><code>401</code>：认证失败</li>
<li><code>429</code>：速率限制</li>
<li><code>500</code>：服务器错误</li>
</ul>
<h2 id="第三部分spring-ai-与-openai-api-详细对应关系">第三部分：Spring AI 与 OpenAI API 详细对应关系</h2>
<h3 id="1-聊天补全chat-completions-1">1. 聊天补全（Chat Completions）</h3>
<h4 id="openai-api">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/chat/completions
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;gpt-4&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;messages&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;system&#34;</span>, <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;你是一个助手&#34;</span><span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>, <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;你好&#34;</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;temperature&#34;</span>: 0.7,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;max_tokens&#34;</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="spring-ai-对应">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OpenAiConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiChatModel <span style="color:#a6e22e">openAiChatModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiChatModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;gpt-4&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTemperature</span>(0.<span style="color:#a6e22e">7f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withMaxTokens</span>(1000)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTopP</span>(0.<span style="color:#a6e22e">9f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withFrequencyPenalty</span>(0.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withPresencePenalty</span>(0.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withStop</span>(Arrays.<span style="color:#a6e22e">asList</span>(<span style="color:#e6db74">&#34;Human:&#34;</span>, <span style="color:#e6db74">&#34;AI:&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withN</span>(1)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ChatClient <span style="color:#a6e22e">chatClient</span>(OpenAiChatModel chatModel) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ChatClient.<span style="color:#a6e22e">create</span>(chatModel);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatController</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> ChatClient chatClient;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ChatController</span>(ChatClient.<span style="color:#a6e22e">Builder</span> builder) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">chatClient</span> <span style="color:#f92672">=</span> builder.<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span>(<span style="color:#e6db74">&#34;/chat&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">chat</span>(<span style="color:#a6e22e">@RequestBody</span> String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> chatClient.<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">system</span>(<span style="color:#e6db74">&#34;你是一个助手&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(message)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 流式处理</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span>(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/stream&#34;</span>, produces <span style="color:#f92672">=</span> MediaType.<span style="color:#a6e22e">TEXT_PLAIN_VALUE</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>StreamingResponseBody<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">streamChat</span>(<span style="color:#a6e22e">@RequestBody</span> String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ResponseEntity.<span style="color:#a6e22e">ok</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">contentType</span>(MediaType.<span style="color:#a6e22e">TEXT_PLAIN</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">body</span>(outputStream <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                chatClient.<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">user</span>(message)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">stream</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">content</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">forEach</span>(content <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                            outputStream.<span style="color:#a6e22e">write</span>(content.<span style="color:#a6e22e">getBytes</span>());
</span></span><span style="display:flex;"><span>                            outputStream.<span style="color:#a6e22e">flush</span>();
</span></span><span style="display:flex;"><span>                        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="参数映射关系">参数映射关系</h4>
<table>
  <thead>
      <tr>
          <th>OpenAI API 参数</th>
          <th>Spring AI 配置</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td><code>OpenAiChatOptions.withModel()</code></td>
          <td>模型名称</td>
      </tr>
      <tr>
          <td><code>messages</code></td>
          <td><code>Prompt</code> 构建</td>
          <td>消息列表</td>
      </tr>
      <tr>
          <td><code>temperature</code></td>
          <td><code>OpenAiChatOptions.withTemperature()</code></td>
          <td>温度参数 (0-2)</td>
      </tr>
      <tr>
          <td><code>max_tokens</code></td>
          <td><code>OpenAiChatOptions.withMaxTokens()</code></td>
          <td>最大标记数</td>
      </tr>
      <tr>
          <td><code>top_p</code></td>
          <td><code>OpenAiChatOptions.withTopP()</code></td>
          <td>核采样参数 (0-1)</td>
      </tr>
      <tr>
          <td><code>stream</code></td>
          <td><code>ChatClient.stream()</code></td>
          <td>流式输出</td>
      </tr>
      <tr>
          <td><code>stop</code></td>
          <td><code>OpenAiChatOptions.withStop()</code></td>
          <td>停止序列</td>
      </tr>
      <tr>
          <td><code>presence_penalty</code></td>
          <td><code>OpenAiChatOptions.withPresencePenalty()</code></td>
          <td>存在惩罚 (-2到2)</td>
      </tr>
      <tr>
          <td><code>frequency_penalty</code></td>
          <td><code>OpenAiChatOptions.withFrequencyPenalty()</code></td>
          <td>频率惩罚 (-2到2)</td>
      </tr>
      <tr>
          <td><code>n</code></td>
          <td><code>OpenAiChatOptions.withN()</code></td>
          <td>生成数量</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td><code>OpenAiChatOptions.withUser()</code></td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<h3 id="2-文本补全completions-1">2. 文本补全（Completions）</h3>
<h4 id="openai-api-1">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/completions
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;text-davinci-003&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;prompt&#34;</span>: <span style="color:#e6db74">&#34;写一首诗&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;max_tokens&#34;</span>: 100,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;temperature&#34;</span>: 0.7
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="spring-ai-对应-1">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CompletionConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiCompletionModel <span style="color:#a6e22e">openAiCompletionModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiCompletionModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiCompletionOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;text-davinci-003&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTemperature</span>(0.<span style="color:#a6e22e">7f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withMaxTokens</span>(100)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTopP</span>(0.<span style="color:#a6e22e">9f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withFrequencyPenalty</span>(0.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withPresencePenalty</span>(0.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withStop</span>(Arrays.<span style="color:#a6e22e">asList</span>(<span style="color:#e6db74">&#34;\n\n&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withN</span>(1)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CompletionService</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> OpenAiCompletionModel completionModel;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">complete</span>(String prompt) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> completionModel.<span style="color:#a6e22e">call</span>(prompt);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-嵌入embeddings-1">3. 嵌入（Embeddings）</h3>
<h4 id="openai-api-2">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/embeddings
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;text-embedding-ada-002&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;input&#34;</span>: <span style="color:#e6db74">&#34;机器学习的基本概念&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;encoding_format&#34;</span>: <span style="color:#e6db74">&#34;float&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;dimensions&#34;</span>: <span style="color:#ae81ff">1536</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="spring-ai-对应-2">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmbeddingConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiEmbeddingModel <span style="color:#a6e22e">openAiEmbeddingModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiEmbeddingModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiEmbeddingOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;text-embedding-ada-002&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withEncodingFormat</span>(<span style="color:#e6db74">&#34;float&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withDimensions</span>(1536)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmbeddingService</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> OpenAiEmbeddingModel embeddingModel;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Double<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">embed</span>(String text) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> embeddingModel.<span style="color:#a6e22e">embed</span>(text);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Double<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">embed</span>(List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> texts) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> embeddingModel.<span style="color:#a6e22e">embed</span>(texts);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 批量嵌入</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> EmbeddingResponse <span style="color:#a6e22e">embedBatch</span>(List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> texts) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> embeddingModel.<span style="color:#a6e22e">call</span>(texts);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="参数映射关系-1">参数映射关系</h4>
<table>
  <thead>
      <tr>
          <th>OpenAI API 参数</th>
          <th>Spring AI 配置</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td><code>OpenAiEmbeddingOptions.withModel()</code></td>
          <td>嵌入模型名称</td>
      </tr>
      <tr>
          <td><code>input</code></td>
          <td><code>EmbeddingModel.embed()</code></td>
          <td>输入文本</td>
      </tr>
      <tr>
          <td><code>encoding_format</code></td>
          <td><code>OpenAiEmbeddingOptions.withEncodingFormat()</code></td>
          <td>编码格式</td>
      </tr>
      <tr>
          <td><code>dimensions</code></td>
          <td><code>OpenAiEmbeddingOptions.withDimensions()</code></td>
          <td>嵌入维度</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td><code>OpenAiEmbeddingOptions.withUser()</code></td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<h3 id="4-图像生成images-1">4. 图像生成（Images）</h3>
<h4 id="openai-api-3">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/images/generations
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;dall-e-3&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;prompt&#34;</span>: <span style="color:#e6db74">&#34;一只可爱的猫&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;n&#34;</span>: 1,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;size&#34;</span>: <span style="color:#e6db74">&#34;1024x1024&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;quality&#34;</span>: <span style="color:#e6db74">&#34;standard&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;response_format&#34;</span>: <span style="color:#e6db74">&#34;url&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;style&#34;</span>: <span style="color:#e6db74">&#34;vivid&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="spring-ai-对应-3">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ImageConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiImageModel <span style="color:#a6e22e">openAiImageModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiImageModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiImageOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;dall-e-3&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withN</span>(1)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withSize</span>(<span style="color:#e6db74">&#34;1024x1024&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withQuality</span>(<span style="color:#e6db74">&#34;standard&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withResponseFormat</span>(<span style="color:#e6db74">&#34;url&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withStyle</span>(<span style="color:#e6db74">&#34;vivid&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ImageService</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> OpenAiImageModel imageModel;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ImageResponse <span style="color:#a6e22e">generateImage</span>(String prompt) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> imageModel.<span style="color:#a6e22e">call</span>(prompt);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 生成多张图片</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ImageResponse <span style="color:#a6e22e">generateImages</span>(String prompt, <span style="color:#66d9ef">int</span> count) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> imageModel.<span style="color:#a6e22e">call</span>(OpenAiImagePrompt.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">withPrompt</span>(prompt)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">withN</span>(count)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">build</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="参数映射关系-2">参数映射关系</h4>
<table>
  <thead>
      <tr>
          <th>OpenAI API 参数</th>
          <th>Spring AI 配置</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td><code>OpenAiImageOptions.withModel()</code></td>
          <td>图像模型名称</td>
      </tr>
      <tr>
          <td><code>prompt</code></td>
          <td><code>ImageModel.call()</code></td>
          <td>图像描述</td>
      </tr>
      <tr>
          <td><code>n</code></td>
          <td><code>OpenAiImageOptions.withN()</code></td>
          <td>生成数量 (1-10)</td>
      </tr>
      <tr>
          <td><code>size</code></td>
          <td><code>OpenAiImageOptions.withSize()</code></td>
          <td>图像尺寸</td>
      </tr>
      <tr>
          <td><code>quality</code></td>
          <td><code>OpenAiImageOptions.withQuality()</code></td>
          <td>图像质量</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td><code>OpenAiImageOptions.withResponseFormat()</code></td>
          <td>响应格式</td>
      </tr>
      <tr>
          <td><code>style</code></td>
          <td><code>OpenAiImageOptions.withStyle()</code></td>
          <td>图像风格</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td><code>OpenAiImageOptions.withUser()</code></td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<h3 id="5-音频转录audio-transcriptions-1">5. 音频转录（Audio Transcriptions）</h3>
<h4 id="openai-api-4">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/audio/transcriptions
</span></span><span style="display:flex;"><span>-F file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@audio.mp3&#34;</span>
</span></span><span style="display:flex;"><span>-F model<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;whisper-1&#34;</span>
</span></span><span style="display:flex;"><span>-F language<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh&#34;</span>
</span></span><span style="display:flex;"><span>-F response_format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;json&#34;</span>
</span></span><span style="display:flex;"><span>-F temperature<span style="color:#f92672">=</span>0.0
</span></span></code></pre></div><h4 id="spring-ai-对应-4">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AudioConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiAudioTranscriptionModel <span style="color:#a6e22e">openAiAudioTranscriptionModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiAudioTranscriptionModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiAudioTranscriptionOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;whisper-1&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withLanguage</span>(<span style="color:#e6db74">&#34;zh&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withResponseFormat</span>(<span style="color:#e6db74">&#34;json&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTemperature</span>(0.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withTimestampGranularities</span>(Arrays.<span style="color:#a6e22e">asList</span>(<span style="color:#e6db74">&#34;word&#34;</span>, <span style="color:#e6db74">&#34;segment&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AudioService</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> OpenAiAudioTranscriptionModel transcriptionModel;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">transcribe</span>(Resource audioFile) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> transcriptionModel.<span style="color:#a6e22e">call</span>(audioFile);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 从文件路径转录</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">transcribeFromFile</span>(String filePath) {
</span></span><span style="display:flex;"><span>        Resource audioFile <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileSystemResource(filePath);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> transcriptionModel.<span style="color:#a6e22e">call</span>(audioFile);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="参数映射关系-3">参数映射关系</h4>
<table>
  <thead>
      <tr>
          <th>OpenAI API 参数</th>
          <th>Spring AI 配置</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withModel()</code></td>
          <td>转录模型</td>
      </tr>
      <tr>
          <td><code>file</code></td>
          <td><code>AudioTranscriptionModel.call()</code></td>
          <td>音频文件</td>
      </tr>
      <tr>
          <td><code>language</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withLanguage()</code></td>
          <td>语言代码</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withResponseFormat()</code></td>
          <td>响应格式</td>
      </tr>
      <tr>
          <td><code>temperature</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withTemperature()</code></td>
          <td>温度参数</td>
      </tr>
      <tr>
          <td><code>timestamp_granularities</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withTimestampGranularities()</code></td>
          <td>时间戳粒度</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td><code>OpenAiAudioTranscriptionOptions.withUser()</code></td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<h3 id="6-文本转语音text-to-speech-1">6. 文本转语音（Text-to-Speech）</h3>
<h4 id="openai-api-5">OpenAI API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST https://api.openai.com/v1/audio/speech
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;model&#34;</span>: <span style="color:#e6db74">&#34;tts-1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;input&#34;</span>: <span style="color:#e6db74">&#34;你好，欢迎使用语音服务！&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;voice&#34;</span>: <span style="color:#e6db74">&#34;alloy&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;response_format&#34;</span>: <span style="color:#e6db74">&#34;mp3&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;speed&#34;</span>: 1.0
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="spring-ai-对应-5">Spring AI 对应</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TTSConfig</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAiAudioSpeechModel <span style="color:#a6e22e">openAiAudioSpeechModel</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAiAudioSpeechModel(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> OpenAiApi(<span style="color:#e6db74">&#34;your-api-key&#34;</span>, <span style="color:#e6db74">&#34;https://api.openai.com&#34;</span>),
</span></span><span style="display:flex;"><span>            OpenAiAudioSpeechOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withModel</span>(<span style="color:#e6db74">&#34;tts-1&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withVoice</span>(<span style="color:#e6db74">&#34;alloy&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withResponseFormat</span>(<span style="color:#e6db74">&#34;mp3&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withSpeed</span>(1.<span style="color:#a6e22e">0f</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">withUser</span>(<span style="color:#e6db74">&#34;spring-ai-app&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TTSService</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> OpenAiAudioSpeechModel speechModel;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">synthesize</span>(String text) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> speechModel.<span style="color:#a6e22e">call</span>(text);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 保存为文件</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">synthesizeToFile</span>(String text, String outputPath) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> audioData <span style="color:#f92672">=</span> speechModel.<span style="color:#a6e22e">call</span>(text);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            Files.<span style="color:#a6e22e">write</span>(Paths.<span style="color:#a6e22e">get</span>(outputPath), audioData);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException(<span style="color:#e6db74">&#34;保存音频文件失败&#34;</span>, e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="参数映射关系-4">参数映射关系</h4>
<table>
  <thead>
      <tr>
          <th>OpenAI API 参数</th>
          <th>Spring AI 配置</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>model</code></td>
          <td><code>OpenAiAudioSpeechOptions.withModel()</code></td>
          <td>TTS 模型</td>
      </tr>
      <tr>
          <td><code>input</code></td>
          <td><code>AudioSpeechModel.call()</code></td>
          <td>输入文本</td>
      </tr>
      <tr>
          <td><code>voice</code></td>
          <td><code>OpenAiAudioSpeechOptions.withVoice()</code></td>
          <td>语音类型</td>
      </tr>
      <tr>
          <td><code>response_format</code></td>
          <td><code>OpenAiAudioSpeechOptions.withResponseFormat()</code></td>
          <td>响应格式</td>
      </tr>
      <tr>
          <td><code>speed</code></td>
          <td><code>OpenAiAudioSpeechOptions.withSpeed()</code></td>
          <td>语速</td>
      </tr>
      <tr>
          <td><code>user</code></td>
          <td><code>OpenAiAudioSpeechOptions.withUser()</code></td>
          <td>用户标识</td>
      </tr>
  </tbody>
</table>
<h2 id="总结">总结</h2>
<p>Spring AI 通过统一的 API 对 OpenAI 的各种接口进行了完整封装，主要对应关系包括：</p>
<ol>
<li><strong>ChatClient</strong> ↔ <strong>Chat Completions API</strong> - 聊天对话</li>
<li><strong>EmbeddingModel</strong> ↔ <strong>Embeddings API</strong> - 文本嵌入</li>
<li><strong>ImageModel</strong> ↔ <strong>Images API</strong> - 图像生成</li>
<li><strong>AudioTranscriptionModel</strong> ↔ <strong>Audio Transcriptions API</strong> - 音频转录</li>
<li><strong>AudioSpeechModel</strong> ↔ <strong>Text-to-Speech API</strong> - 文本转语音</li>
<li><strong>CompletionModel</strong> ↔ <strong>Completions API</strong> - 文本补全</li>
</ol>
<p>这种设计使得开发者可以：</p>
<ul>
<li>使用统一的 API 访问不同的 AI 功能</li>
<li>轻松切换不同的模型提供商</li>
<li>享受 Spring 生态系统的所有优势</li>
<li>简化配置和错误处理</li>
<li>支持流式处理和异步操作</li>
<li>实现复杂的多模态 AI 应用</li>
</ul>
		</div>


	</article>
</main>
<footer class="post__footer">
	

<div class="post-related">
	<h3>相关文章</h3>
	<ul class="post-related-list">
		
		<li class="post-related-item">
			<a href="/posts/2025/09/19/spring-ai-chat-client-api/" target="_blank" title="Spring AI ChatClient API 介绍">Spring AI ChatClient API 介绍</a>
		</li>
		
		<li class="post-related-item">
			<a href="/posts/2025/09/18/spring-ai/" target="_blank" title="Spring AI 介绍">Spring AI 介绍</a>
		</li>
		
		<li class="post-related-item">
			<a href="/posts/2025/07/15/ruoyi-ai/" target="_blank" title="RuoYi AI 源码分析">RuoYi AI 源码分析</a>
		</li>
		
		<li class="post-related-item">
			<a href="/posts/2024/10/14/testing-spring-boot-applications-best-practices-and-frameworks/" target="_blank" title="[译]测试 Spring Boot 应用程序：最佳实践和框架">[译]测试 Spring Boot 应用程序：最佳实践和框架</a>
		</li>
		
		<li class="post-related-item">
			<a href="/posts/2024/07/10/springdoc-with-spring-boot/" target="_blank" title="Spring Boot集成SpringDoc生成Api文档">Spring Boot集成SpringDoc生成Api文档</a>
		</li>
		
		<li class="post-related-item">
			<a href="/posts/2024/06/05/oauth2-with-spring-part-1-knowing-the-basic-concepts/" target="_blank" title="[译]OAuth2 with Spring 第1部分：了解基本概念">[译]OAuth2 with Spring 第1部分：了解基本概念</a>
		</li>
		
	</ul>
</div>

</footer>

<footer class="post__footer">
	<footer class="post__footer">
		
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 0 0 0-6 3 3 0 0 0 0 6"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/spring-ai/" rel="tag">spring-ai</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/java/" rel="tag">java</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/tutorial/" rel="tag">tutorial</a>
		</li>
	</ul>
</div>
	</footer>
</footer>


<nav class="pagination flex">
	<div class="pagination__item pagination__item--prev">
		<a class="pagination__link" href="/posts/2025/09/19/spring-ai-chat-client-api/" rel="prev">
			<p class="pagination__title">«&thinsp;上一篇: Spring AI ChatClient API 介绍</p>
		</a>
	</div>
	<div class="pagination__item pagination__item--next">
		<a class="pagination__link" href="/posts/2025/09/25/spring-ai-restaurant-showcase/" rel="next">
			<p class="pagination__title">&thinsp;» 下一篇: 基于 Spring AI 构建智能餐厅推荐系统：多模型集成的实践指南</p>
		</a>
	</div>
</nav>



<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="ChenSoul avatar" src="/avatar.jpg" class="avatar" height="60" width="60" loading="lazy">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">关于 ChenSoul</span>
	</div>
	<div class="authorbox__description">
		一个来自中国武汉的开发者，主要撰写软件开发和开源方面的文章。浏览我的<a href="%28/posts%29">博客文章</a>，订阅我的 <a href="/index.xml">RSS</a> 源，或了解更多<a href="/about/">关于我</a>的信息。
	</div>
</div>




	<p><h3>欢迎留言！</h3></p>
<div id="remark42"></div>
<script>
	var remark_config = {
		host: 'https:\/\/comment.chensoul.cc',
		site_id: 'remark',
		components: ['embed'],
		url: 'https:\/\/blog.chensoul.cc\/posts\/2025\/09\/22\/openai-api-with-spring-ai\/',
		locale: 'zh'
	};

	!function(e, n) {
		for (var o = 0; o < e.length; o++) {
			var r = n.createElement('script'),
			c = '.js',
			d = n.head || n.body;
			'noModule' in r ? (r.type = 'module', c = '.mjs') : r.async = !0, r.defer = !0, r.src = remark_config.host + '/web/' + e[o] + c, d.appendChild(r)
		}
	}(remark_config.components || ['embed'], document);

</script>





			</div>
			

<aside class="sidebar sidebar--right">
	<div class="post__toc toc">
		<div class="toc__title">目录</div>
		<div class="toc__menu">
			<nav id="TableOfContents">
  <ul>
    <li><a href="#第一部分openai-api-接口详解">第一部分：OpenAI API 接口详解</a>
      <ul>
        <li><a href="#1-api-概述">1. API 概述</a></li>
        <li><a href="#2-认证与安全">2. 认证与安全</a></li>
        <li><a href="#3-速率限制与计费">3. 速率限制与计费</a></li>
      </ul>
    </li>
    <li><a href="#第二部分openai-api-接口详解">第二部分：OpenAI API 接口详解</a>
      <ul>
        <li><a href="#1-聊天补全chat-completions">1. 聊天补全（Chat Completions）</a></li>
        <li><a href="#2-文本补全completions">2. 文本补全（Completions）</a></li>
        <li><a href="#3-嵌入embeddings">3. 嵌入（Embeddings）</a></li>
        <li><a href="#4-图像生成images">4. 图像生成（Images）</a></li>
        <li><a href="#5-音频转录audio-transcriptions">5. 音频转录（Audio Transcriptions）</a></li>
        <li><a href="#6-文本转语音text-to-speech">6. 文本转语音（Text-to-Speech）</a></li>
        <li><a href="#7-流式处理">7. 流式处理</a></li>
        <li><a href="#8-错误处理">8. 错误处理</a></li>
      </ul>
    </li>
    <li><a href="#第三部分spring-ai-与-openai-api-详细对应关系">第三部分：Spring AI 与 OpenAI API 详细对应关系</a>
      <ul>
        <li><a href="#1-聊天补全chat-completions-1">1. 聊天补全（Chat Completions）</a></li>
        <li><a href="#2-文本补全completions-1">2. 文本补全（Completions）</a></li>
        <li><a href="#3-嵌入embeddings-1">3. 嵌入（Embeddings）</a></li>
        <li><a href="#4-图像生成images-1">4. 图像生成（Images）</a></li>
        <li><a href="#5-音频转录audio-transcriptions-1">5. 音频转录（Audio Transcriptions）</a></li>
        <li><a href="#6-文本转语音text-to-speech-1">6. 文本转语音（Text-to-Speech）</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
		</div>
	</div>
</aside>

		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
<div class="footer__links">
	<a class="footer__link" href="/">首页</a> | <a class="footer__link" href="/categories/">分类</a> | <a class="footer__link" href="/tags/">标签</a> | <a class="footer__link" href="/index.xml">订阅</a> | <a class="footer__link" href="/about/">关于</a>
</div>
		<div class="footer__copyright">
			&copy; 2025 ChenSoul.
			<span class="footer__copyright-credits">基于 <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> 引擎和 <a href="https://github.com/chensoul/rose-hugo/" rel="nofollow noopener" target="_blank">Rose Hugo</a> 主题</span>
		</div>
	</div>

	






<style>
	.scroll-up a {
		display: block;
		height: 3.125rem;
		width: 3.125rem;
		text-align: center;
		line-height: 2.7;
		border-radius: 50px;
		font-size: 1.125rem;
		color: #fff;
		opacity: 1;
		transition: all 0.3s ease 0s;
		box-shadow: 0 0 10px rgb(0 0 0 / 20%);
	}
	.scroll-up a {
		background: #ee591f;
	}
	.scroll-up {
		position: fixed;
		display: none;
		bottom: 50px;
		z-index: 999;
	}
	.scroll-up.right {
		right: 60px;
	}
</style>

<div class="scroll-up custom right" style="display: block;"><a href="#top" id="top-link" accesskey="g"><i
	class="fa fa-arrow-up"></i></a></div>

<script>
	var mybutton = document.getElementById("top-link");
	window.onscroll = function () {
		if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
			mybutton.style.visibility = "visible";
			mybutton.style.opacity = "1";
		} else {
			mybutton.style.visibility = "hidden";
			mybutton.style.opacity = "0";
		}
	};
</script>


    <script defer src="https://umami.chensoul.cc/random-string.js" data-website-id="1e07d36d-bec3-4ba6-9459-876b1ac3bbe7"></script>
</footer>


	</div>

	<script>
		'use strict';
		(function iifeMenu(document, window, undefined) {
			var menuBtn = document.querySelector('.menu__btn');
			var	menu = document.querySelector('.menu__list');
			function toggleMenu() {
				menu.classList.toggle('menu__list--active');
				menu.classList.toggle('menu__list--transition');
				this.classList.toggle('menu__btn--active');
				this.setAttribute(
					'aria-expanded',
					this.getAttribute('aria-expanded') === 'true' ? 'false' : 'true'
				);
			}
			function removeMenuTransition() {
				this.classList.remove('menu__list--transition');
			}
			if (menuBtn && menu) {
				menuBtn.addEventListener('click', toggleMenu, false);
				menu.addEventListener('transitionend', removeMenuTransition, false);
			}
		}(document, window));
	</script>
</body>
</html>