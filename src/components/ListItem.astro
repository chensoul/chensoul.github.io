---
/**
 * 列表项组件
 *
 * @fileoverview 显示文章的简略列表项（用于侧边栏等）
 *
 * 核心逻辑：
 * 1. 紧凑布局：日期 + 标题
 * 2. 日期固定宽度，标题自适应
 * 3. 标题溢出时显示省略号
 * 4. 自动选择最新时间（更新时间或发布时间）
 *
 * 依赖关系：
 * - 被侧边栏、推荐文章等模块使用
 * - 用于显示简短的文章列表
 */

import type { CollectionEntry } from "astro:content";

/**
 * 组件属性接口
 *
 * @property href - 文章链接地址
 * @property frontmatter - 文章元数据
 */
export interface Props {
  href?: string;
  frontmatter: CollectionEntry<"blog">["data"];
}

const { href, frontmatter } = Astro.props;
const { title, date, updated } = frontmatter;

// 选择最新时间（优先使用更新时间）
const latest = new Date(updated ?? date);
// ISO 格式（用于 datetime 属性）
const iso = latest.toISOString();
---

<li class="my-2">
  <a
    href={href}
    class="flex flex-col space-x-4 rounded-md p-2 hover:bg-foreground/5 sm:flex-row"
  >
    <!-- 日期 -->
    <time class="mr-4 text-accent/80 w-24" datetime={iso}></time>
    <!-- 标题（溢出省略） -->
    <span class="truncate overflow-hidden whitespace-nowrap">
      {title}
    </span>
  </a>
</li>
