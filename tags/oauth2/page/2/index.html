<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Oauth2 - ChenSoul Blog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:url" content="https://blog.chensoul.cc/tags/oauth2/"><meta property="og:site_name" content="ChenSoul Blog"><meta property="og:title" content="Oauth2"><meta property="og:description" content="Java, Spring Boot, JPA, Hibernate, SQL, REST API, Microservice, Architecture, CI/CD, Docker, Kubernetes, Cloud, and DevOps Tutorials"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><meta itemprop=name content="Oauth2"><meta itemprop=description content="Java, Spring Boot, JPA, Hibernate, SQL, REST API, Microservice, Architecture, CI/CD, Docker, Kubernetes, Cloud, and DevOps Tutorials"><meta itemprop=datePublished content="2025-06-06T00:00:00+00:00"><meta itemprop=dateModified content="2025-06-06T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Oauth2"><meta name=twitter:description content="Java, Spring Boot, JPA, Hibernate, SQL, REST API, Microservice, Architecture, CI/CD, Docker, Kubernetes, Cloud, and DevOps Tutorials"><link rel=stylesheet href=/css/style.css><link rel=alternate type=application/rss+xml href=/tags/oauth2/index.xml title="ChenSoul Blog"><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="ChenSoul Blog" rel=home><div class="logo__item logo__text"><div class=logo__title>ChenSoul Blog</div><div class=logo__tagline>Java, Spring Boot, Microservice, Cloud, Architecture and DevOps Tutorials</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/tools/><span class=menu__text>Tools</span></a></li><li class=menu__item><a class=menu__link href=/tutorials/><span class=menu__text>Tutorials</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class="main list" role=main><header class=main__header><h1 class=main__title>Oauth2</h1></header><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2024/06/05/oauth-2-simplified/ rel=bookmark>[译]OAuth2简化版</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2024-06-05T00:00:00Z>2024-06-05</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/java/ rel=category>Java</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>这篇文章以简化的格式描述了 OAuth 2.0，以帮助开发人员和服务提供商实现该协议。</p><p><a href=https://oauth.net/2/ target=_blank>OAuth 2 规范</a>读起来可能有点混乱，所以我写了这篇文章来帮助以简化的格式描述术语。核心规范将许多决策留给实现者，通常基于实现的安全权衡。这篇文章没有描述成功实施 OAuth 2 所需的所有可能决策，而是做出适用于大多数实现的决策。</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2024/06/05/oauth-2-simplified/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2024/06/05/oauth2/ rel=bookmark>RFC6749 | OAuth2.0授权框架中文版</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2024-06-05T00:00:00Z>2024-06-05</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/java/ rel=category>Java</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><h2 id=前言>前言</h2><h3 id=摘要>摘要</h3><p>OAuth2.0 授权框架允许第三方应用获取对 HTTP 服务的有限的访问权限，既可以以资源所有者名义在资源所有者和 HTTP 服务之间进行允许的交互，也可以允许第三方应用以自己的名义进行访问。本规范取代并淘汰 RFC 5849 中描述的 OAuth 1.0 协议。</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2024/06/05/oauth2/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2024/05/07/oauth/ rel=bookmark>[译]什么是 OAuth？</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2024-05-07T00:00:00Z>2024-05-07</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/java/ rel=category>Java</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>原文链接：<a href=https://www.pubnub.com/guides/oauth/ target=_blank>https://www.pubnub.com/guides/oauth/</a></p><h2 id=什么是-oauth>什么是 OAuth？</h2><p><a href=https://oauth.net/ target=_blank>OAuth（开放授权）</a>是一种开放标准授权框架，允许第三方应用程序访问用户数据，而无需用户共享其登录凭据。它为用户提供了一种安全且标准化的方式，将其在一个网站上的资源的访问权限授予另一个网站或应用程序，而无需暴露其密码。</p><p>简单来说，OAuth 充当最终用户和他们想要授予访问权限的应用程序之间的中间人。用户不会直接向 Web 应用程序提供用户名和密码，而是会被重定向到授权服务器（例如 Google、Facebook 或 Twitter），在那里他们可以安全地验证自己的身份。经过身份验证后，用户可以授予或拒绝对其想要使用的应用程序上的数据的访问权限。</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2024/05/07/oauth/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2024/01/09/til/ rel=bookmark>2024-01-09｜单点登录</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2024-01-09T00:00:00Z>2024-01-09</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/review/ rel=category>Review</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>今天做了什么：</p><ul><li><a href=https://zexo.dev/posts/2020/03/01/keep-your-repo-dependencies-up-to-date-with-renovate/ target=_blank>使用 renovate 监控第三方依赖更新</a> ，renovate 貌似需要付费，放弃。</li><li>spring-security-oauth2-samples 示例工程重命名模块和包名，代码见 <a href=https://github.com/chensoul/spring-security-oauth2-boot target=_blank>spring-security-oauth2-boot</a></li><li>实现单点登录并测试</li></ul><h2 id=实现单点登录并测试>实现单点登录并测试</h2><p>实现单点登录（Single Sign-On，SSO）可以采用多种思路和技术。下面是几种常见的实现思路：</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2024/01/09/til/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/12/28/til/ rel=bookmark>2023-12-28｜今天做了什么</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-12-28T00:00:00Z>2023-12-28</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/review/ rel=category>Review</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>今天做了什么：</p><ul><li>重构微服务项目中使用 spring-security-oauth2 搭建 OAuth2 认证服务和资源服务的代码，减少其他模块对此的耦合度。计划将
spring-security-oauth2 迁移到 spring-security-oauth2-authorization-server 上，即使用 OAuth2.1 授权和认证。<strong>Spring
Authorization Server</strong>
相关文档，可以参考 <a href=https://blog.51cto.com/u_15268610/category2 target=_blank>https://blog.51cto.com/u_15268610/category2</a>。</li><li>看 <a href=https://github.com/xuxiaowei-cloud/xuxiaowei-cloud target=_blank>xuxiaowei-cloud</a> master 分支源代码，整理 /login
登陆逻辑，参数：username、password、tenantId、clientId</li></ul><blockquote><p>登陆成功</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/12/28/til/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/12/27/til/ rel=bookmark>2023-12-27｜今天做了什么</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-12-27T00:00:00Z>2023-12-27</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/review/ rel=category>Review</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>今天做了什么：</p><ul><li>微服务项目中认证服务器配置授权码模式，并测试通过<ul><li>扩展 RedisAuthorizationCodeServices ，支持设置过期时间。<ul><li>注意：OAuth2Authentication 无法从 json 反序列化，故无法使用 JSON 反序列化类，只能使用 JDK 反序列化类。</li></ul></li><li>扩展 BearerTokenExtractor，支持从 request 请求的 header 中读取 access_token</li><li>配置 JWK token 使用时<ul><li>扩展 JwtAccessTokenConverter ，用于解析 jwks 接口返回的
json，相关说明参考 <a href=https://www.baeldung.com/spring-security-oauth2-jws-jwk#9-creating-the-jwk-set-endpoint target=_blank>creating-the-jwk-set-endpoint</a></li><li>JwkDefinitionSource 类中获取 jwkSetUrls 时，不支持 url 中配置服务名称，即不支持负载均衡。故，重写该类以支持通过
RestTemplate （可以注入一个支持负载均衡的 RestTemplate） 解析 jwkSetUrls 返回的 json 类型的字符串；创建了一个支持负载均衡的
TokenStore。</li></ul></li></ul></li><li>运行 <a href=https://gitee.com/xuxiaowei-cloud/xuxiaowei-cloud/tree/archive/OAuth2.0 target=_blank>xuxiaowei-cloud</a> 项目时<ul><li>提示 <code>Rollup failed to resolve import "@vue/shared"</code>，原因：这个错误是由于无法解析到 <code>@vue/shared</code>
这个包导致的。@vue/shared 是 Vue 内部使用的一个共享工具库。解决方案：将 @vue/shared 添加到项目的依赖中。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>npm install --save @vue/shared
</span></span></code></pre></div></li><li>Controller 的方法上添加注解判断是否有权限，例子：
<code>@PreAuthorize("hasAuthority('manage_user_authority') or #oauth2.hasScope('manage_user_authority')")</code></li><li>Principal 中的用户对象，即 UserDetails 对象不添加额外字段，只有 username，如果想获取用户信息，需要通过用户服务去查询。</li></ul></li></ul><p>关于 OAuth2 的参考资料：</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/12/27/til/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/12/21/til/ rel=bookmark>2023-12-21｜Spring Security对OAuth2的支持及实现方式</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-12-21T00:00:00Z>2023-12-21</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/review/ rel=category>Review</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>Today I Learned. 今天分享内容：Spring Security 对 OAuth2 的支持</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/12/21/til/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/12/18/til/ rel=bookmark>2023-12-18｜使用Spring Security实现OAuth2授权和认证</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-12-18T00:00:00Z>2023-12-18</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/review/ rel=category>Review</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p>Today I Learned. 今天分享内容：使用Spring Security实现OAuth2授权和认证。</p><p>最近在开发 Spring Cloud 微服务时，需要对 OAuth2 的异常处理进行定制，从网上搜到一个 github 仓库：<a href=https://github.com/selfancy/oauth2 target=_blank>oauth2</a>。这篇仓库的代码实现了 OAuth2 的四种授权模式、I18N 国际化、异常处理、JWT Token，我 fork 了一份代码，做了一些改动，去掉了 webflux、eureka 相关代码。</p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/12/18/til/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/08/18/how-to-implement-security-in-spring-boot3-using-userdetailsservice/ rel=bookmark>[译]如何在Spring Boot3中使用UserDetailsService实现安全性？</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-08-18T00:00:00Z>2023-08-18</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/spring-boot/ rel=category>Spring-Boot</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><p><img src=../../../static/images/UserDetailsServiceSpringBoot3-1.webp alt="Spring Security UserDetailsService Using Spring Boot 3"></p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/08/18/how-to-implement-security-in-spring-boot3-using-userdetailsservice/>More…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/2023/08/16/spring-security-with-oauth2/ rel=bookmark>[译]Spring Security - OAuth2</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-08-16T00:00:00Z>2023-08-16</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/spring-boot/ rel=category>Spring-Boot</a></span></div></div></header><div class="content list__excerpt post__content clearfix"><h2 id=oauth-20-基础知识>OAuth 2.0 基础知识</h2><p><img src=https://www.tutorialspoint.com/spring_security/images/oauth_2_fundamentals.webp alt="OAuth 2.0 Fundamentals"></p></div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/2023/08/16/spring-security-with-oauth2/>More…</a></div></article></main><div class=pagination><a class="pagination__item pagination__item--prev btn" href=/tags/oauth2/>«</a>
<span class="pagination__item pagination__item--current">2/3</span>
<a class="pagination__item pagination__item--next btn" href=/tags/oauth2/page/3/>»</a></div></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/tools/>Tools</a> | <a class=footer__link href=/tutorials/>Tutorials</a> | <a class=footer__link href=/about/>About</a></div><div class=footer__copyright>&copy; 2025 ChenSoul.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/chensoul/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>